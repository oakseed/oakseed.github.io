{"meta":{"title":"故名","subtitle":null,"description":null,"author":"oakseed","url":"http://blog.levas.top","root":"/"},"pages":[{"title":"","date":"2019-07-16T11:51:23.000Z","updated":"2020-10-30T19:17:20.275Z","comments":true,"path":"about/index.html","permalink":"http://blog.levas.top/about/index.html","excerpt":"","text":"记得住的名字终将记不住 记不住的名字一个个故去 星夜巡游几生华彩，车水马龙难伴穷途 事情没有答案，脚下永远是路 足迹要遍布大街小巷 让行道树和天空投影眼中 转瞬的灵感可引动深思，也许会领悟到规则的力量 那时，我将变成光"},{"title":"archive","date":"2019-07-16T11:08:30.000Z","updated":"2019-07-16T11:08:30.000Z","comments":true,"path":"archive/index.html","permalink":"http://blog.levas.top/archive/index.html","excerpt":"","text":""},{"title":"categories","date":"2019-07-16T11:08:45.000Z","updated":"2019-07-16T11:49:34.000Z","comments":true,"path":"categories/index.html","permalink":"http://blog.levas.top/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2019-07-16T11:08:21.000Z","updated":"2019-07-16T11:49:51.000Z","comments":true,"path":"tags/index.html","permalink":"http://blog.levas.top/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"云筏容器云网络测试","slug":"云筏容器云网络测试","date":"2020-10-30T05:32:50.000Z","updated":"2020-10-30T13:53:39.176Z","comments":true,"path":"2020/10/30/云筏容器云网络测试/","link":"","permalink":"http://blog.levas.top/2020/10/30/云筏容器云网络测试/","excerpt":"","text":"[toc] 摘要​ 本文主要测试云筏容器云的网络情况，包括国内三网延迟，国外路由，延迟，丢包率。会重点关注连接国外服务器的延迟和丢包。同时提供和容器云同直辖市的阿里云轻量服务器的测速作为对比。 简介​ 云筏容器云目前节点在世纪互联机房。云筏表示海外流量全部走GIA线路，出口稳定性值得一测。同时，世纪互联机房的带宽费很高，也有必要关注一下流量价格，这一点需要等待云筏信息。 ​ 此外云筏容器云通过三级域名cname来转发内网的容器流量（env-xxxxxxx.paas.cloud.ac.cn）。在入口处对端口转发做了负载均衡来提高可用性。支持80端口和443端口，想要建站猜测要备案，具体情况请以云筏官方信息为准。除三级域名转发外，还支持为容器绑定一个ipv4，下文会针对该ipv4地址单独测试。 ​ 测试时容器的上行带宽限制为100M。容器选择ubuntu18.04镜像。 国内三网测速superspeed测速 借助工具superspeed.sh进行三网测速。 1bash &lt;(curl -Lso- https://git.io/superspeed) ​ 可以看到，上行带宽接近我容器的限制，差不多跑满了。 ​ 作为对比，提供一个我的上海阿里云学生轻量（上行限5M）测速图: 网站测速 ​ 发起ping的地区基本都是绿的。 大陆以外地区测速各地traceroute 测试借助站长工具-路由追踪完成，各图片traceroute起始ip都在大陆以外地区，具体信息见图片： 需要注意的是，这里末端ip虽然显示是北京电信，但感觉是广播到上海的ip，后面的测试延迟也都能印证这一点。我对此不太了解，不发表过多意见。 除了通过外部traceroute容器云以外，每张图片下面还有从容器云向外traceroute的路由图。 1234567891011traceroute to 165.3.86.1 (165.3.86.1), 30 hops max, 60 byte packets 1 172.31.0.3 (172.31.0.3) 0.045 ms 0.021 ms 0.024 ms 2 124.74.*.* (124.74.*.*) 6.467 ms 6.411 ms 6.363 ms 3 101.95.91.185 (101.95.91.185) 8.734 ms 101.95.91.189 (101.95.91.189) 8.665 ms 101.95.91.61 (101.95.91.61) 10.291 ms 4 61.152.24.193 (61.152.24.193) 7.179 ms 101.95.88.213 (101.95.88.213) 5.992 ms 5.941 ms 5 * 59.43.130.210 (59.43.130.210) 5.835 ms 5.876 ms 6 59.43.246.218 (59.43.246.218) 6.835 ms 59.43.187.58 (59.43.187.58) 5.242 ms 59.43.246.214 (59.43.246.214) 5.751 ms 7 59.43.246.238 (59.43.246.238) 133.711 ms 59.43.182.82 (59.43.182.82) 132.638 ms 59.43.246.238 (59.43.246.238) 133.256 ms 8 218.30.49.90 (218.30.49.90) 146.274 ms 146.229 ms 146.150 ms 9 * * *10 165.3.86.1 (165.3.86.1) 169.209 ms 169.144 ms * 12345678910111213141516171 172.31.0.3 (172.31.0.3) 0.051 ms 0.019 ms 0.014 ms 2 124.74.*.* (124.74.*.*) 6.160 ms 6.123 ms 6.150 ms 3 101.95.91.189 (101.95.91.189) 12.569 ms 101.95.91.193 (101.95.91.193) 5.467 ms 101.95.91.69 (101.95.91.69) 5.406 ms 4 61.152.24.205 (61.152.24.205) 5.846 ms 61.152.24.193 (61.152.24.193) 10.790 ms 10.740 ms 5 59.43.138.46 (59.43.138.46) 6.370 ms * * 6 59.43.187.70 (59.43.187.70) 5.762 ms 59.43.246.254 (59.43.246.254) 6.105 ms 59.43.187.66 (59.43.187.66) 6.055 ms 7 59.43.248.110 (59.43.248.110) 31.643 ms 28.933 ms 59.43.183.82 (59.43.183.82) 30.394 ms 8 xe-0-0-21-2.a01.chwahk02.hk.bb.gin.ntt.net (203.131.241.69) 33.575 ms xe-0-0-21-2.a00.chwahk02.hk.bb.gin.ntt.net (203.131.241.65) 31.443 ms xe-0-0-21-2.a01.chwahk02.hk.bb.gin.ntt.net (203.131.241.69) 34.428 ms 9 ae-5.r02.tkokhk01.hk.bb.gin.ntt.net (129.250.6.120) 60.622 ms ae-14.r03.tkokhk01.hk.bb.gin.ntt.net (129.250.5.178) 60.788 ms 60.503 ms10 ae-11.r24.tkokhk01.hk.bb.gin.ntt.net (129.250.6.99) 30.775 ms 33.485 ms 30.594 ms11 ae-12.r30.tokyjp05.jp.bb.gin.ntt.net (129.250.2.50) 64.466 ms 65.330 ms 61.332 ms12 ae-9.r26.tokyjp05.jp.bb.gin.ntt.net (129.250.2.10) 59.495 ms 58.644 ms 56.619 ms13 ae-0.lgu.tokyjp05.jp.bb.gin.ntt.net (129.250.8.194) 95.558 ms 101.365 ms 101.271 ms14 1.208.147.117 (1.208.147.117) 91.122 ms 1.208.146.117 (1.208.146.117) 98.543 ms 1.208.147.117 (1.208.147.117) 96.346 ms15 61.43.224.210 (61.43.224.210) 96.297 ms 1.208.104.166 (1.208.104.166) 95.111 ms 1.208.104.194 (1.208.104.194) 90.468 ms16 * * *17 45.91.225.1 (45.91.225.1) 100.427 ms 98.911 ms 91.096 ms 1234567891 172.31.0.3 (172.31.0.3) 0.073 ms 0.023 ms 0.017 ms 2 124.74.*.* (124.74.*.*) 4.905 ms 4.753 ms 5.283 ms 3 101.95.91.193 (101.95.91.193) 6.430 ms * * 4 101.95.88.49 (101.95.88.49) 8.887 ms 61.152.24.193 (61.152.24.193) 11.560 ms 11.494 ms 5 * 59.43.138.58 (59.43.138.58) 6.166 ms * 6 59.43.187.62 (59.43.187.62) 4.810 ms 59.43.187.78 (59.43.187.78) 2.837 ms 59.43.187.62 (59.43.187.62) 2.715 ms 7 59.43.189.34 (59.43.189.34) 130.099 ms 131.959 ms 131.869 ms 8 218.30.49.90 (218.30.49.90) 149.163 ms 151.527 ms 151.443 ms 9 165.3.86.1 (165.3.86.1) 156.747 ms 156.837 ms 156.467 ms 1234567891 172.31.0.3 (172.31.0.3) 0.059 ms 0.022 ms 0.017 ms 2 124.74.*.* (124.74.*.*) 3.384 ms 5.217 ms 5.586 ms 3 101.95.91.65 (101.95.91.65) 5.498 ms 101.95.91.57 (101.95.91.57) 9.168 ms 101.95.91.197 (101.95.91.197) 9.382 ms 4 101.95.88.53 (101.95.88.53) 6.253 ms 101.95.88.213 (101.95.88.213) 12.620 ms 61.152.24.209 (61.152.24.209) 6.117 ms 5 * * 59.43.130.218 (59.43.130.218) 5.921 ms 6 59.43.246.218 (59.43.246.218) 4.924 ms * 59.43.187.78 (59.43.187.78) 4.999 ms 7 59.43.247.113 (59.43.247.113) 35.909 ms 59.43.250.225 (59.43.250.225) 46.250 ms 59.43.184.178 (59.43.184.178) 41.993 ms 8 * * * 9 185.202.103.129 (185.202.103.129) 87.965 ms 88.396 ms 87.738 ms 12345678910111213141 172.31.0.3 (172.31.0.3) 0.064 ms 0.028 ms 0.017 ms 2 124.74.*.* (124.74.*.*) 7.287 ms 7.169 ms 7.131 ms 3 101.95.91.61 (101.95.91.61) 5.292 ms 101.95.91.69 (101.95.91.69) 5.294 ms 101.95.91.61 (101.95.91.61) 5.718 ms 4 101.95.88.57 (101.95.88.57) 6.389 ms 6.341 ms 101.95.88.49 (101.95.88.49) 6.310 ms 5 * 59.43.130.194 (59.43.130.194) 6.334 ms 59.43.138.54 (59.43.138.54) 5.650 ms 6 59.43.187.58 (59.43.187.58) 5.590 ms 59.43.186.246 (59.43.186.246) 5.175 ms 59.43.187.74 (59.43.187.74) 4.661 ms 7 59.43.183.78 (59.43.183.78) 89.714 ms 59.43.189.82 (59.43.189.82) 35.414 ms 59.43.183.78 (59.43.183.78) 89.512 ms 8 59.43.244.222 (59.43.244.222) 34.023 ms 33.967 ms 33.332 ms 9 * * *10 * * *11 * * *12 * * *13 * * *断了 1234567891 172.31.0.3 (172.31.0.3) 0.066 ms 0.016 ms 0.017 ms 2 124.74.*.* (124.74.*.*) 6.011 ms 5.956 ms 6.059 ms 3 101.95.91.57 (101.95.91.57) 5.848 ms 101.95.91.69 (101.95.91.69) 5.767 ms 101.95.91.189 (101.95.91.189) 6.168 ms 4 61.152.24.189 (61.152.24.189) 7.513 ms 101.95.88.57 (101.95.88.57) 7.498 ms 61.152.24.205 (61.152.24.205) 5.607 ms 5 * * * 6 59.43.187.62 (59.43.187.62) 5.473 ms 59.43.246.218 (59.43.246.218) 5.801 ms 59.43.246.214 (59.43.246.214) 5.743 ms 7 59.43.183.2 (59.43.183.2) 30.317 ms * 59.43.247.113 (59.43.247.113) 36.248 ms 8 * * * 9 154.91.168.129 (154.91.168.129) 113.006 ms 112.912 ms 113.263 ms 1234567891011121314151 172.31.0.3 (172.31.0.3) 0.059 ms 0.018 ms 0.014 ms 2 124.74.*.* (124.74.*.*) 3.897 ms 4.776 ms 5.678 ms 3 101.95.91.185 (101.95.91.185) 10.363 ms 10.315 ms 101.95.91.193 (101.95.91.193) 4.941 ms 4 61.152.24.205 (61.152.24.205) 6.124 ms 61.152.24.193 (61.152.24.193) 6.894 ms 101.95.88.53 (101.95.88.53) 5.646 ms 5 * 59.43.138.70 (59.43.138.70) 6.138 ms 59.43.130.206 (59.43.130.206) 5.392 ms 6 59.43.187.58 (59.43.187.58) 5.900 ms 59.43.246.218 (59.43.246.218) 5.099 ms 59.43.187.58 (59.43.187.58) 5.488 ms 7 59.43.182.137 (59.43.182.137) 135.492 ms 134.046 ms * 8 218.30.49.74 (218.30.49.74) 136.901 ms 129.392 ms 133.297 ms 9 10.255.255.21 (10.255.255.21) 137.995 ms * *10 * * *11 * * *12 * * *13 * * *14 * * *断了 1234567891011121314151617181920211 172.31.0.3 (172.31.0.3) 0.042 ms 0.016 ms 0.015 ms 2 124.74.*.* (124.74.*.*) 6.235 ms 5.739 ms 6.084 ms 3 101.95.91.69 (101.95.91.69) 5.388 ms 101.95.91.193 (101.95.91.193) 5.356 ms 5.306 ms 4 61.152.24.205 (61.152.24.205) 42.443 ms 101.95.88.53 (101.95.88.53) 5.196 ms 101.95.88.49 (101.95.88.49) 6.314 ms 5 * * * 6 59.43.187.66 (59.43.187.66) 6.067 ms 59.43.187.82 (59.43.187.82) 5.127 ms 59.43.187.70 (59.43.187.70) 4.831 ms 7 59.43.184.186 (59.43.184.186) 165.806 ms 166.172 ms 166.089 ms 8 59.43.250.5 (59.43.250.5) 165.468 ms 165.478 ms 165.368 ms 9 87.128.235.129 (87.128.235.129) 183.694 ms 184.047 ms 183.631 ms10 f-ee1-i.F.DE.NET.DTAG.DE (62.154.14.54) 182.886 ms 187.033 ms 179.253 ms11 be100-162.fra-5-a9.de.eu (37.187.232.98) 197.036 ms 197.003 ms 197.041 ms12 * * *13 * * *14 * * *15 be103.rbx-g1-nc5.fr.eu (178.33.100.158) 204.581 ms be103.rbx-g2-nc5.fr.eu (94.23.122.240) 205.660 ms be103.rbx-g1-nc5.fr.eu (178.33.100.158) 206.128 ms16 * * *17 be100-1295.nwk-1-a9.nj.us (192.99.146.127) 274.808 ms 272.740 ms be100-1298.nwk-5-a9.nj.us (192.99.146.133) 274.578 ms18 be102.bhs-g2-nc5.qc.ca (192.99.146.138) 291.634 ms 296.276 ms 295.745 ms19 * * *20 * * *21 192.99.12.252 (192.99.12.252) 277.941 ms 274.304 ms 274.510 ms 小结​ 海外双向ping可以发现，由容器云主动发起的连接，流量全部走gia；海外服务器发起的连接，流量走163。 个人测试traceroute 我的hz德国vps的traceroute 容器云结果： 从德国到达英国，然后进入上海电信，汇入世纪互联机房。 123456789101112131415161718traceroute to env-*.paas.cloud.ac.cn (120.133.*.*), 30 hops max, 60 byte packets 1 static.1.221.243.136.clients.your-server.de (136.243.221.1) 0.203 ms 0.185 ms 0.178 ms 2 static.65.52.243.136.clients.your-server.de (136.243.52.65) 0.312 ms 0.320 ms 0.337 ms 3 * core24.fsn1.hetzner.com (213.239.203.193) 0.560 ms * 4 core1.fra.hetzner.com (213.239.203.153) 5.206 ms 5.456 ms 5.194 ms 5 ae18.cr6-fra2.ip4.gtt.net (154.14.78.153) 7.856 ms 7.877 ms 7.844 ms 6 ip4.gtt.net (154.14.32.238) 7.175 ms 6.756 ms 6.748 ms 7 202.97.94.85 (202.97.94.85) 212.128 ms 211.904 ms 211.889 ms 8 202.97.90.30 (202.97.90.30) 244.065 ms 244.052 ms 243.666 ms 9 202.97.50.145 (202.97.50.145) 229.087 ms 228.757 ms 228.743 ms10 61.152.24.1 (61.152.24.1) 256.530 ms 256.709 ms 256.710 ms11 61.152.20.78 (61.152.20.78) 242.240 ms 61.152.20.70 (61.152.20.70) 226.094 ms 124.74.55.122 (124.74.55.122) 235.990 ms12 * 101.95.19.118 (101.95.19.118) 261.121 ms *13 * * *14 120.133.*.* (120.133.*.*) 244.191 ms 244.186 ms 244.148 ms15 * * *16 * * *17 * * * hz德国vps traceroute 阿里云上海轻量作为对比： 从欧洲出口后依次到达北京联通，上海联通，再到达阿里云 123456789101112131415161718192021traceroute to 47.103.*.* (47.103.*.*), 30 hops max, 60 byte packets 1 static.1.221.243.136.clients.your-server.de (136.243.221.1) 0.342 ms 0.319 ms 0.310 ms 2 static.65.52.243.136.clients.your-server.de (136.243.52.65) 1.991 ms 2.013 ms 2.042 ms 3 * core23.fsn1.hetzner.com (213.239.203.189) 12.276 ms core24.fsn1.hetzner.com (213.239.203.193) 11.967 ms 4 juniper5.nbg1.hetzner.com (213.239.252.245) 3.380 ms juniper4.nbg1.hetzner.com (213.239.252.233) 2.654 ms juniper5.nbg1.hetzner.com (213.239.252.245) 2.646 ms 5 nug-b1-link.telia.net (62.115.183.232) 3.194 ms 3.185 ms nug-b1-link.telia.net (213.248.70.0) 3.176 ms 6 ffm-bb1-link.telia.net (62.115.113.146) 5.627 ms 5.436 ms 5.467 ms 7 ffm-b2-link.telia.net (62.115.142.205) 5.548 ms 5.611 ms ffm-b1-link.telia.net (62.115.141.241) 5.310 ms 8 219.158.33.193 (219.158.33.193) 215.462 ms 215.220 ms 219.158.41.89 (219.158.41.89) 237.073 ms 9 219.158.19.125 (219.158.19.125) 244.011 ms 219.158.11.181 (219.158.11.181) 239.608 ms 219.158.20.201 (219.158.20.201) 234.909 ms10 219.158.22.142 (219.158.22.142) 233.200 ms 219.158.103.25 (219.158.103.25) 240.364 ms 219.158.22.142 (219.158.22.142) 238.342 ms11 219.158.113.122 (219.158.113.122) 263.650 ms 219.158.103.217 (219.158.103.217) 294.865 ms 219.158.24.125 (219.158.24.125) 295.047 ms12 219.158.6.245 (219.158.6.245) 298.079 ms 219.158.113.105 (219.158.113.105) 267.344 ms 219.158.6.245 (219.158.6.245) 304.467 ms13 139.226.210.70 (139.226.210.70) 303.289 ms 316.794 ms 321.940 ms14 139.226.230.162 (139.226.230.162) 257.725 ms * 139.226.230.154 (139.226.230.154) 314.902 ms15 * * *16 116.251.88.154 (116.251.88.154) 271.827 ms * 140.205.50.226 (140.205.50.226) 204.456 ms17 116.251.117.121 (116.251.117.121) 214.609 ms 116.251.95.1 (116.251.95.1) 272.019 ms *18 * * *19 * * *20 47.103.*.* (47.103.*.*) 232.703 ms 216.823 ms * 补充一个do 加利福尼亚traceroute 容器云结果： 在上海电信入境，然后进入世纪互联机房 123456789101112131415161718192021 traceroute to env-*.paas.cloud.ac.cn (120.133.*.205), 30 hops max, 60 byte packets 1 * * * 2 10.64.66.103 (10.64.66.103) 2.240 ms 2.232 ms 10.64.66.85 (10.64.66.85) 0.856 ms 3 138.197.249.150 (138.197.249.150) 0.990 ms 138.197.249.144 (138.197.249.144) 1.009 ms 138.197.249.158 (138.197.249.158) 1.206 ms 4 138.197.249.186 (138.197.249.186) 0.928 ms 138.197.249.188 (138.197.249.188) 0.875 ms 138.197.249.180 (138.197.249.180) 1.164 ms 5 * * * 6 ae-1-9.edge2.SanJose3.Level3.net (4.69.209.181) 1.564 ms 1.018 ms ae-3-19.edge2.SanJose3.Level3.net (4.69.209.189) 1.346 ms 7 CHINA-TELEC.edge2.SanJose3.Level3.net (4.53.210.114) 3.771 ms CHINA-TELEC.edge2.SanJose3.Level3.net (4.53.210.166) 4.624 ms CHINA-TELEC.edge2.SanJose3.Level3.net (4.53.210.210) 2.212 ms 8 202.97.50.69 (202.97.50.69) 8.496 ms 8.495 ms 8.069 ms 9 202.97.51.221 (202.97.51.221) 172.743 ms 172.633 ms 172.617 ms 10 202.97.91.25 (202.97.91.25) 188.471 ms 188.318 ms 188.475 ms 11 202.97.57.146 (202.97.57.146) 187.323 ms 183.232 ms 183.211 ms 12 * 101.95.88.13 (101.95.88.13) 177.223 ms 177.221 ms 13 101.95.95.26 (101.95.95.26) 179.104 ms 101.95.95.89 (101.95.95.89) 189.681 ms 101.95.95.73 (101.95.95.73) 210.423 ms 14 61.152.20.66 (61.152.20.66) 177.908 ms 177.954 ms 124.74.55.26 (124.74.55.26) 166.225 ms 15 * * 101.95.133.246 (101.95.133.246) 177.160 ms 16 * * * 17 120.133.*.* (120.133.*.*) 176.838 ms 176.397 ms 175.656 ms 18 * * * 19 * * *20 * * * icmp ping hz德国ping 容器云 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102PING env-*.paas.cloud.ac.cn (120.133.*.204) 56(84) bytes of data.64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=1 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=2 ttl=47 time=293 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=3 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=4 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=5 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=6 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=7 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=8 ttl=47 time=293 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=9 ttl=47 time=293 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=10 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=11 ttl=47 time=294 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=12 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=13 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=14 ttl=47 time=294 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=15 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=16 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=18 ttl=47 time=294 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=19 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=20 ttl=47 time=293 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=21 ttl=47 time=293 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=22 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=23 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=24 ttl=47 time=294 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=25 ttl=47 time=294 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=26 ttl=47 time=294 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=28 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=29 ttl=47 time=298 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=30 ttl=47 time=298 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=31 ttl=47 time=299 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=32 ttl=47 time=298 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=33 ttl=47 time=299 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=34 ttl=47 time=299 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=35 ttl=47 time=299 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=36 ttl=47 time=298 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=37 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=38 ttl=47 time=298 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=39 ttl=47 time=297 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=40 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=41 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=42 ttl=47 time=300 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=43 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=44 ttl=47 time=297 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=45 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=46 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=48 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=49 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=50 ttl=47 time=301 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=51 ttl=47 time=308 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=52 ttl=47 time=313 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=53 ttl=47 time=307 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=54 ttl=47 time=307 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=55 ttl=47 time=297 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=56 ttl=47 time=301 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=57 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=58 ttl=47 time=299 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=59 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=60 ttl=47 time=311 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=61 ttl=47 time=299 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=62 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=63 ttl=47 time=297 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=64 ttl=47 time=301 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=65 ttl=47 time=313 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=66 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=67 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=68 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=69 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=70 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=71 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=72 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=73 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=74 ttl=47 time=303 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=75 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=76 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=77 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=78 ttl=47 time=293 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=79 ttl=47 time=293 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=80 ttl=47 time=292 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=81 ttl=47 time=292 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=82 ttl=47 time=292 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=83 ttl=47 time=293 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=84 ttl=47 time=292 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=85 ttl=47 time=294 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=86 ttl=47 time=293 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=87 ttl=47 time=295 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=88 ttl=47 time=302 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=89 ttl=47 time=297 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=90 ttl=47 time=311 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=91 ttl=47 time=313 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=92 ttl=47 time=301 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=93 ttl=47 time=297 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=94 ttl=47 time=301 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=95 ttl=47 time=297 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=96 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=97 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=98 ttl=47 time=297 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=99 ttl=47 time=296 ms64 bytes from 120.133.*.204 (120.133.*.204): icmp_seq=100 ttl=47 time=296 ms^C--- env-*.paas.cloud.ac.cn ping statistics ---101 packets transmitted, 97 received, 3% packet loss, time 100111msrtt min/avg/max/mdev = 292.241/297.762/313.664/4.642 ms hz德国ping 阿里云上海轻量，作为对比： 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169PING 47.103.*.* (47.103.*.*) 56(84) bytes of data.64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=1 ttl=44 time=255 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=2 ttl=44 time=265 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=3 ttl=44 time=269 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=4 ttl=44 time=253 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=5 ttl=44 time=238 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=6 ttl=44 time=249 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=7 ttl=44 time=265 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=8 ttl=44 time=266 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=9 ttl=44 time=261 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=10 ttl=44 time=234 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=11 ttl=44 time=264 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=12 ttl=44 time=238 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=13 ttl=44 time=268 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=14 ttl=44 time=263 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=15 ttl=44 time=252 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=16 ttl=44 time=259 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=17 ttl=44 time=240 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=18 ttl=44 time=266 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=19 ttl=44 time=243 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=20 ttl=44 time=244 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=21 ttl=44 time=268 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=22 ttl=44 time=261 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=23 ttl=44 time=262 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=24 ttl=44 time=227 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=25 ttl=44 time=242 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=26 ttl=44 time=251 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=27 ttl=44 time=269 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=28 ttl=44 time=263 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=29 ttl=44 time=234 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=30 ttl=44 time=259 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=31 ttl=44 time=261 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=32 ttl=44 time=223 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=33 ttl=44 time=269 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=34 ttl=44 time=264 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=35 ttl=44 time=258 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=36 ttl=44 time=269 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=37 ttl=44 time=263 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=38 ttl=44 time=230 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=39 ttl=44 time=267 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=40 ttl=44 time=270 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=41 ttl=44 time=252 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=42 ttl=44 time=261 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=43 ttl=44 time=257 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=44 ttl=44 time=254 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=45 ttl=44 time=271 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=46 ttl=44 time=272 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=47 ttl=44 time=271 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=48 ttl=44 time=263 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=49 ttl=44 time=261 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=50 ttl=44 time=224 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=51 ttl=44 time=232 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=52 ttl=44 time=267 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=53 ttl=44 time=244 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=54 ttl=44 time=270 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=55 ttl=44 time=266 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=56 ttl=44 time=240 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=57 ttl=44 time=234 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=58 ttl=44 time=266 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=59 ttl=44 time=269 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=60 ttl=44 time=269 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=61 ttl=44 time=258 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=62 ttl=44 time=265 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=63 ttl=44 time=235 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=64 ttl=44 time=268 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=65 ttl=44 time=265 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=66 ttl=44 time=227 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=67 ttl=44 time=266 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=68 ttl=44 time=265 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=69 ttl=44 time=248 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=70 ttl=44 time=270 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=71 ttl=44 time=269 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=72 ttl=44 time=255 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=73 ttl=44 time=260 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=74 ttl=44 time=258 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=75 ttl=44 time=239 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=76 ttl=44 time=243 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=77 ttl=44 time=270 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=78 ttl=44 time=271 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=79 ttl=44 time=263 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=80 ttl=44 time=260 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=81 ttl=44 time=246 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=82 ttl=44 time=231 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=83 ttl=44 time=270 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=84 ttl=44 time=225 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=85 ttl=44 time=270 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=86 ttl=44 time=275 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=87 ttl=44 time=259 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=88 ttl=44 time=215 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=89 ttl=44 time=269 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=90 ttl=44 time=269 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=91 ttl=44 time=262 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=92 ttl=44 time=237 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=93 ttl=44 time=236 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=94 ttl=44 time=260 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=95 ttl=44 time=272 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=96 ttl=44 time=271 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=97 ttl=44 time=265 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=98 ttl=44 time=233 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=99 ttl=44 time=255 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=100 ttl=44 time=237 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=101 ttl=44 time=251 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=102 ttl=44 time=270 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=103 ttl=44 time=272 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=104 ttl=44 time=264 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=105 ttl=44 time=251 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=106 ttl=44 time=235 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=107 ttl=44 time=241 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=108 ttl=44 time=243 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=109 ttl=44 time=270 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=110 ttl=44 time=270 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=111 ttl=44 time=257 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=112 ttl=44 time=234 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=113 ttl=44 time=232 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=114 ttl=44 time=263 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=115 ttl=44 time=269 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=116 ttl=44 time=270 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=117 ttl=44 time=239 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=118 ttl=44 time=227 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=119 ttl=44 time=250 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=120 ttl=44 time=259 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=121 ttl=44 time=268 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=122 ttl=44 time=271 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=123 ttl=44 time=259 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=124 ttl=44 time=239 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=125 ttl=44 time=245 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=126 ttl=44 time=236 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=127 ttl=44 time=260 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=128 ttl=44 time=275 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=129 ttl=44 time=262 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=130 ttl=44 time=238 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=131 ttl=44 time=229 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=132 ttl=44 time=257 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=133 ttl=44 time=264 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=134 ttl=44 time=243 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=135 ttl=44 time=257 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=136 ttl=44 time=262 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=138 ttl=44 time=245 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=139 ttl=44 time=232 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=140 ttl=44 time=267 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=141 ttl=44 time=268 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=142 ttl=44 time=269 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=143 ttl=44 time=256 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=144 ttl=44 time=242 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=145 ttl=44 time=233 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=146 ttl=44 time=265 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=147 ttl=44 time=232 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=148 ttl=44 time=256 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=149 ttl=44 time=268 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=150 ttl=44 time=260 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=151 ttl=44 time=261 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=152 ttl=44 time=255 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=153 ttl=44 time=267 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=154 ttl=44 time=261 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=155 ttl=44 time=264 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=156 ttl=44 time=269 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=157 ttl=44 time=248 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=158 ttl=44 time=264 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=159 ttl=44 time=256 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=160 ttl=44 time=253 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=161 ttl=44 time=257 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=162 ttl=44 time=268 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=163 ttl=44 time=262 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=164 ttl=44 time=249 ms64 bytes from 47.103.*.* (47.103.*.*): icmp_seq=165 ttl=44 time=267 ms^C--- 47.103.*.* ping statistics ---165 packets transmitted, 164 received, 0% packet loss, time 164212msrtt min/avg/max/mdev = 215.725/255.905/275.815/13.962 ms 补充一个do加利福尼亚 ping 容器云结果： 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152PING env-*.paas.cloud.ac.cn (120.133.*.205) 56(84) bytes of data.64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=1 ttl=48 time=168 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=2 ttl=48 time=168 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=3 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=4 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=5 ttl=48 time=168 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=6 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=7 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=8 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=9 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=10 ttl=48 time=168 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=12 ttl=48 time=168 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=13 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=14 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=15 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=16 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=17 ttl=48 time=168 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=18 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=19 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=20 ttl=48 time=168 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=21 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=22 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=23 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=24 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=25 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=27 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=28 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=29 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=31 ttl=48 time=168 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=32 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=33 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=34 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=35 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=37 ttl=48 time=168 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=38 ttl=48 time=168 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=39 ttl=48 time=168 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=40 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=41 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=42 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=45 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=46 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=47 ttl=48 time=168 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=48 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=49 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=50 ttl=48 time=167 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=51 ttl=48 time=168 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=52 ttl=48 time=168 ms64 bytes from 120.133.*.205 (120.133.*.205): icmp_seq=53 ttl=48 time=168 ms^C--- env-*.paas.cloud.ac.cn ping statistics ---54 packets transmitted, 47 received, 12% packet loss, time 53157msrtt min/avg/max/mdev = 167.359/167.907/168.460/0.224 ms tcp ping hz德国tcpping结果 1.这里响应ip出现了跳变现象，不知是什么情况，跳变现象发生时，延迟会波动且出现丢包。 ​ 不跳变时延迟很稳定。 2.云筏解释ip跳变现象： 123我们两台物理机做负载均衡高可用这两个IP会先去到VIP网关，然后根据可用性分配到两台LB的其中一台最后LB再端口转发到内网对应的机器里面 所以跳变是世纪互联内网的负载均衡切换导致的。 1234567891011121314151617181920212223242526272829303132333435root@HmWOO3goHl:~# ./tcpping env-*.paas.cloud.ac.cnseq 0: tcp response from 120.133.*.205 [open] 261.190 msseq 1: tcp response from 120.133.*.205 [open] 272.638 msseq 2: tcp response from 120.133.*.205 [open] 261.234 msseq 3: tcp response from 120.133.*.205 [open] 262.140 msseq 4: tcp response from 120.133.*.205 [open] 264.078 msseq 5: tcp response from 120.133.*.205 [open] 271.157 msseq 6: tcp response from 120.133.*.204 [open] 299.257 msseq 9: tcp response from 120.133.*.204 [open] 303.163 msseq 7: no response (timeout)seq 10: tcp response from 120.133.*.204 [open] 294.689 msseq 8: no response (timeout)seq 11: tcp response from 120.133.*.204 [open] 263.507 msseq 13: tcp response from 120.133.*.205 [open] 261.874 msseq 14: tcp response from 120.133.*.205 [open] 277.982 msseq 12: no response (timeout)seq 15: tcp response from 120.133.*.205 [open] 271.825 msseq 16: tcp response from 120.133.*.205 [open] 277.671 msseq 17: tcp response from 120.133.*.205 [open] 277.896 msseq 18: tcp response from 120.133.*.204 [open] 261.651 msseq 19: tcp response from 120.133.*.204 [open] 246.754 msseq 21: tcp response from 120.133.*.204 [open] 262.533 msseq 20: no response (timeout)seq 23: tcp response from 120.133.*.204 [open] 275.207 msseq 24: tcp response from 120.133.*.205 [open] 261.053 msseq 22: no response (timeout)seq 25: tcp response from 120.133.*.205 [open] 260.566 msseq 26: tcp response from 120.133.*.205 [open] 262.524 msseq 27: tcp response from 120.133.*.205 [open] 271.370 msseq 28: tcp response from 120.133.*.205 [open] 260.854 msseq 29: tcp response from 120.133.*.205 [open] 271.908 msseq 30: tcp response from 120.133.*.204 [open] 280.423 msseq 31: tcp response from 120.133.*.204 [open] 263.348 msseq 32: tcp response from 120.133.*.204 [open] 280.145 msseq 33: tcp response from 120.133.*.204 [open] 275.200 ms 作为对比，tcpping 我的阿里云上海轻量的结果： 显然延迟不稳定 1234567891011121314151617181920212223242526272829303132seq 0: tcp response from 47.103.*.* [open] 190.321 msseq 1: tcp response from 47.103.*.* [open] 203.469 msseq 2: tcp response from 47.103.*.* [open] 265.313 msseq 3: tcp response from 47.103.*.* [open] 191.326 msseq 4: tcp response from 47.103.*.* [open] 271.669 msseq 5: tcp response from 47.103.*.* [open] 258.259 msseq 6: tcp response from 47.103.*.* [open] 264.827 msseq 7: tcp response from 47.103.*.* [open] 218.586 msseq 8: tcp response from 47.103.*.* [open] 249.855 msseq 9: tcp response from 47.103.*.* [open] 256.512 msseq 10: tcp response from 47.103.*.* [open] 267.790 msseq 11: tcp response from 47.103.*.* [open] 205.753 msseq 12: tcp response from 47.103.*.* [open] 205.874 msseq 13: tcp response from 47.103.*.* [open] 191.428 msseq 14: tcp response from 47.103.*.* [open] 257.678 msseq 15: tcp response from 47.103.*.* [open] 233.651 msseq 16: tcp response from 47.103.*.* [open] 218.725 msseq 17: tcp response from 47.103.*.* [open] 265.811 msseq 18: tcp response from 47.103.*.* [open] 284.095 msseq 19: tcp response from 47.103.*.* [open] 248.003 msseq 20: tcp response from 47.103.*.* [open] 229.340 msseq 21: tcp response from 47.103.*.* [open] 262.052 msseq 22: tcp response from 47.103.*.* [open] 229.722 msseq 23: tcp response from 47.103.*.* [open] 285.513 msseq 24: tcp response from 47.103.*.* [open] 209.825 msseq 25: tcp response from 47.103.*.* [open] 274.478 msseq 26: tcp response from 47.103.*.* [open] 194.436 msseq 27: tcp response from 47.103.*.* [open] 236.819 msseq 28: tcp response from 47.103.*.* [open] 205.485 msseq 29: tcp response from 47.103.*.* [open] 267.304 msseq 30: tcp response from 47.103.*.* [open] 263.437 msseq 31: tcp response from 47.103.*.* [open] 215.653 ms 补充一个 do加利福尼亚 tcpping容器云结果： 1234567891011121314151617181920212223242526272829303132seq 0: tcp response from 120.133.*.205 [open] 167.918 msseq 1: tcp response from 120.133.*.204 [open] 165.901 msseq 2: tcp response from 120.133.*.204 [open] 183.537 msseq 3: tcp response from 120.133.*.204 [open] 166.928 msseq 4: tcp response from 120.133.*.204 [open] 166.852 msseq 5: tcp response from 120.133.*.204 [open] 168.444 msseq 6: tcp response from 120.133.*.204 [open] 166.720 msseq 7: tcp response from 120.133.*.205 [open] 167.135 msseq 8: tcp response from 120.133.*.205 [open] 168.177 msseq 9: tcp response from 120.133.*.205 [open] 175.911 msseq 10: tcp response from 120.133.*.205 [open] 176.296 msseq 11: tcp response from 120.133.*.205 [open] 177.633 msseq 12: tcp response from 120.133.*.204 [open] 158.024 msseq 13: tcp response from 120.133.*.204 [open] 165.600 msseq 14: tcp response from 120.133.*.205 [open] 168.363 msseq 15: tcp response from 120.133.*.205 [open] 167.185 msseq 16: tcp response from 120.133.*.205 [open] 178.642 msseq 17: tcp response from 120.133.*.205 [open] 165.704 msseq 19: tcp response from 120.133.*.204 [open] 166.478 msseq 18: no response (timeout)seq 21: tcp response from 120.133.*.204 [open] 165.800 msseq 22: tcp response from 120.133.*.204 [open] 166.172 msseq 20: tcp response from 120.133.*.204 [open] 176.612 msseq 23: tcp response from 120.133.*.205 [open] 168.056 msseq 24: tcp response from 120.133.*.205 [open] 167.095 msseq 26: tcp response from 120.133.*.205 [open] 168.448 msseq 27: tcp response from 120.133.*.204 [open] 177.671 msseq 25: no response (timeout)seq 28: tcp response from 120.133.*.204 [open] 166.789 msseq 29: tcp response from 120.133.*.204 [open] 166.829 msseq 30: tcp response from 120.133.*.205 [open] 176.666 msseq 31: tcp response from 120.133.*.205 [open] 167.679 ms 独立ipv4​ 容器云面板显示有独立ipv4功能，但是申请失败，无法测试。 ​ 据云筏表示，已准备提供独立ipv4，但暂未拿到icp证，不开放。独立ipv4的网络情况需要等待容器云正式上线后才能知晓。 出口带宽容器云作为文件服务器 目的：看看到海外访问容器云的带宽能达到多少 测试环境： 容器部署nginx，以一个opsx镜像（871MB）作为大体积文件。nginx配置： 1234567server \\&#123; listen 80; location / \\&#123; root /home/test; autoindex on; \\&#125; \\&#125; 下载机的服务商与地域：hz德国 + digitalocean加利福尼亚 wget单线程下载 + axel多线程。使用axel是为了尽可能抢占到最大的带宽 没开BBR。gia应该不需要开BBR。 测试路由：均为163 测试结果 wget单线程（avg.） axel 64线程（avg.） hz德国(136.243.0.0) 1.11MB/s 1.14 MB/ do加利福尼亚(64.225.0.0) 1.12MB/s 懒得测了 个人感觉：很显然出口带宽被限制了，单线程能跑到1.11MB/s，axel多线程理所应当有显著提高。无法跑到更高的带宽上，是云筏限制或是上游运营商限制不得而知。 海外从容器云下载大文件能稳定跑到1MB/s 以上，还是挺不错的。 容器云作为下载机 测试环境： hz德国vps作为文件服务器，部署相同的镜像（871MB） 容器云作为下载机 wget单线程+axel多线程。 hz德国vps开了BBR。理由：很早之前就开了。 hz德国vps 上行带宽限制为100M。 新增一个hzG口拍卖机作为文件服务器 容器云到hz vps的测试路由： 1234567891011121314151617traceroute to 136.243.*.* (136.243.*.*), 30 hops max, 60 byte packets 1 172.31.0.3 (172.31.0.3) 0.058 ms 0.017 ms 0.015 ms 2 124.74.*.* (124.74.*.*) 5.734 ms 5.873 ms 5.647 ms 3 101.95.91.197 (101.95.91.197) 7.580 ms 101.95.91.65 (101.95.91.65) 5.212 ms 101.95.91.189 (101.95.91.189) 6.716 ms 4 61.152.24.193 (61.152.24.193) 11.655 ms 61.152.24.189 (61.152.24.189) 9.444 ms 61.152.24.193 (61.152.24.193) 11.554 ms 5 59.43.130.206 (59.43.130.206) 5.544 ms * * 6 59.43.187.62 (59.43.187.62) 5.906 ms 59.43.187.66 (59.43.187.66) 4.417 ms 59.43.246.190 (59.43.246.190) 4.333 ms 7 59.43.246.206 (59.43.246.206) 203.203 ms * 59.43.187.186 (59.43.187.186) 183.522 ms 8 ldn-b4-link.telia.net (80.239.193.225) 184.786 ms 184.469 ms 184.521 ms 9 ldn-bb4-link.telia.net (62.115.120.238) 212.100 ms 212.712 ms 211.377 ms10 hbg-bb4-link.telia.net (62.115.122.160) 218.719 ms 200.832 ms 218.341 ms11 nug-b1-link.telia.net (62.115.113.175) 211.494 ms 212.482 ms 212.178 ms12 hetzner-ic-340780-nug-b1.c.telia.net (213.248.70.1) 231.423 ms 211.965 ms 211.946 ms13 core24.fsn1.hetzner.com (213.239.252.234) 251.591 ms * *14 ex9k2.dc12.fsn1.hetzner.com (213.239.203.194) 252.019 ms ex9k2.dc12.fsn1.hetzner.com (213.239.203.190) 214.789 ms 213.501 ms15 static.*.*.243.136.clients.your-server.de (136.243.*.*) 234.460 ms 216.406 ms 216.386 ms16 static.*.*.243.136.clients.your-server.de (136.243.*.*) 216.331 ms 234.386 ms 216.707 ms 容器云到hz拍卖机的测试路由: 12345678910111213141516traceroute to 144.0.0.0 (144.0.0.0), 30 hops max, 60 byte packets 1 172.31.0.3 (172.31.0.3) 0.068 ms 0.020 ms 0.016 ms 2 124.74.*.* (124.74.*.*) 3.699 ms 4.549 ms 5.537 ms 3 101.95.91.65 (101.95.91.65) 5.686 ms 101.95.91.197 (101.95.91.197) 9.224 ms 101.95.91.61 (101.95.91.61) 5.354 ms 4 101.95.88.229 (101.95.88.229) 5.399 ms 61.152.24.205 (61.152.24.205) 5.711 ms 101.95.88.229 (101.95.88.229) 5.463 ms 5 59.43.130.190 (59.43.130.190) 6.185 ms 59.43.138.70 (59.43.138.70) 6.222 ms * 6 59.43.187.62 (59.43.187.62) 5.050 ms 59.43.187.74 (59.43.187.74) 5.425 ms 59.43.187.70 (59.43.187.70) 5.841 ms 7 59.43.246.222 (59.43.246.222) 205.813 ms 59.43.246.206 (59.43.246.206) 203.461 ms * 8 * ldn-b4-link.telia.net (80.239.193.225) 187.202 ms * 9 ldn-bb4-link.telia.net (62.115.120.238) 230.664 ms 230.596 ms 230.817 ms10 hbg-bb4-link.telia.net (62.115.122.160) 199.666 ms 217.385 ms 217.339 ms11 nug-b1-link.telia.net (62.115.113.175) 230.177 ms 230.089 ms 210.110 ms12 hetzner-ic-340780-nug-b1.c.telia.net (213.248.70.1) 231.184 ms 232.349 ms 214.600 ms13 core23.fsn1.hetzner.com (213.239.252.230) 234.428 ms * *14 ex9k2.dc10.fsn1.hetzner.com (213.239.229.62) 212.568 ms ex9k2.dc10.fsn1.hetzner.com (213.239.229.58) 234.260 ms 234.156 ms15 static.0.0.0.144.clients.your-server.de (144.0.0.0) 231.900 ms 231.967 ms 231.922 ms 测试结果： 文件服务器上行带宽 wget单线程（avg.） axel 64线程（avg.） hz vps(136.243.0.0) 100M 9.54MB/s 不测，单线程快跑到了带宽上限没有意义 hz 拍卖机(144.0.0.0) 1000M 6.40MB/s 9.3MB/s 评价 目测限制了从海外入境的带宽，限到了100M。 总结大陆以外地域的网络情况 容器云出口到海外ip走GIA网络，所以能高速拉海外的文件，下载速度很可能被限制到100M。没测走GIA到海外的带宽。 海外入容器云的路由为163网络，从海外下载容器云文件速度略高于1MB/s。没测走163到容器云的带宽。 大陆网络情况 上行限制为100M，多地测速接近了100M。 下行限制大于500M，多地测速超过了500M。少数节点跌到了400M。 1海外双向ping可以发现，由容器云主动发起的连接，流量全部走gia；海外服务器发起的连接，流量走163。 最后一点 测速次数较少，结果仅供参考。 工具汇总 测试使用的工具：ping，traceroute，tcpping 安装tcpping 及使用 123sudo apt-get install tcptraceroutewget http://www.vdberg.org/~richard/tcpping &amp;&amp; chmod 755 tcpping./tcpping www.baidu.com 三网测速脚本superspeed.sh 1bash &lt;(curl -Lso- https://git.io/superspeed) 站长工具-路由追踪","categories":[{"name":"-[服务器测评]","slug":"服务器测评","permalink":"http://blog.levas.top/categories/服务器测评/"}],"tags":[{"name":"-[云筏] -[容器]","slug":"云筏-容器","permalink":"http://blog.levas.top/tags/云筏-容器/"}]},{"title":"云筏容器云测评","slug":"云筏容器云测评","date":"2020-10-28T11:29:06.000Z","updated":"2020-10-30T13:31:33.459Z","comments":true,"path":"2020/10/28/云筏容器云测评/","link":"","permalink":"http://blog.levas.top/2020/10/28/云筏容器云测评/","excerpt":"","text":"[toc] 摘要​ 本文站在一个小开发者角度去测试云筏容器云产品，重点关注容器云的计算性能，io性能，计费与性价比。不测网络。 需求分析​ 近期我做的项目涉及以下内容： opencv图片编辑 ffmpeg脚本开发 机器学习模型训练（容器云不大适合，毕竟有显卡计算会更快） python爬虫 python+mysql的数据处理 ​ 如上，除机器学习模型训练需要gpu不适合以外，其他的云筏容器云感觉都能胜任，但目前还不清楚容器云的流量费用，涉及网络的部分无法估计成本，是否实惠不得而知。目前云筏容器云仅有上海世纪互联机房，带宽成本高昂，作为个人开发者我是消费不起的，比如当下的一个项目要处理体积为64GB的图片，再加上数据库的体积，流量费用估计要破百了。听云筏客服表示后期会加hz德国节点，希望如此能降低流量费用，做到随便用吧。 简介​ 首先，我的笔记本吃不住过高的负载，只能寻求其他计算资源；其次是，项目时有时无，长期租用独立服务器严重超支。曾经选择过华为云的计费服务器（至今已用了华为云一千多的代金券，白嫖太快乐了），国内贵州机房的价格最低，因为有代金券的存在，疯狂开机子开发用，不在意消耗。如图所示： ​ 8核(2.6GHz，总共20.8GHz)16G内存40G硬盘的配置每小时1.2元出头（不考虑网络流量费）。作为对比，云筏的在频率数据一致的情况下，价格相对来说为华为云的45%，如下图所示： ​ 根据下文测试结果估算，同cpu性能，云筏容器云的价格是华为的48%左右。而如果要求华为云的硬盘性能达到云筏的水平，华为云的成本会更高。 ​ 开发时为边测试边部署，所以存在debug时间，此时计算资源空置，如果使用一般的云服务器，就在此时持续计费，从而导致浪费。云筏容器云声称会根据负载自动增减容器云配置，从而在低负载时少扣费节省金额，希望这点能显著降低消耗。 ​ 注：本文写于内测阶段，如上价格可能会变动，请以实际情况为准。 创建容器​ 容器云的动态配置管理令我最费解的，是面板没有像云服务器一样以cpu核心数和频率给出不同级别配置的性能，而仅仅只给出了cpu主频，不好判断该加多少个计算进程。我打算按每GHz频率测试cpu性能，那么开始创建一个2GHz，镜像采用docker ubuntu:latest的容器作为测试环境。 ​ 如上，选中上层的docker栏后，点击select image ​ 搜索栏输入ubuntu后搜索，选中需要的镜像，点击next ​ 如上图可以调整配置，橙色线处可以调整容器配置，我设置为最低400MHz，最高2GHz。紫色为要创建的容器数量，绿线是硬盘大小，左侧红线是容器的名称，右侧红线是容器tag（暂时无法使用latest即ubuntu20.04，云筏表示会在11月10日升级支持），黄线处是每小时的价格，分别为最低配运行时的价格和最高配运行时的价格。 ​ 创建时要从dockerhub拉取镜像，大致估计一下，这次开容器花了3，4分钟。 性能测试写在最前面​ 本文涉及的测试均发生于凌晨低负载时间段，可以认为此时表现好于其他时段。无法代表今后时期的任意时刻下，容器云的性能水平 综合测试 ​ 右侧标注出了容器的配置使用情况，刚开出来时使用了最高使用到了1GHz的频率，因而占用了3个“cloudlets”。开机过后很快降了下去，也就是最低配的情况。猜测是定时监测资源占用，如果高于上限或者低于下限就对应增减配，直到撞墙。这个监控频率目测估计在30秒以内。 ​ ​ 如上图，直接输出cpu信息和内存信息。内存令我有些奇怪，毕竟此时后台显示占用的是1个单位的资源，对应的内存是256MiB，但free -h显示的是1.2G，估计内存的定时监控和我想得不太一样，直接给到上限的动态内存防止进程突发而out of memory，即先给后计费。 ​ 使用lenmonbench测试性能，如下图（没有网络是因为流量费太贵了，还想多玩玩） ​ 单核心分数880，中规中矩。内存带宽仅有14GB/s上下，感觉有些偏低，硬盘io还可以。 ​ 在跑lenmonbench的过程中，面板显示占用的资源最高只有3个性能单位，难道是持续的时间不够久，于是再测几次。 ​ 第二次的数据如上。现在开始开更大规模的容器试试，第二个容器的配置为：4GHz，20G硬盘，意在检测性能是如何翻倍的，以及硬盘内存io会不会有变化——会不会因为容量大小而有变化。 ​ 第二个容器创建消耗了7分钟，可以得知容器的原生镜像实时拉取，并没有本地缓存，容器云有无镜像功能不得而知。这一次的容器4GHz的量超过了宿主机单核2.5GHz，cat输出cpu信息发现得到了2个cpu核心，这样我大概明白了它的资源分配机制，超量就给更多的cpu核心，以保证容器能得到足够的性能；然后试试监控容器的资源消耗，来进行计费。那么有没有可能在监控间隙突发占用cpu资源，在下一次轮询到来前挂起线程来降低cpu频率，从而规避监控来达到高性能低计费呢？ ​ 第二个容器的lenmonbench结果： ​ 这一次容器拥有两个核心，因而单核心性能拉到了宿主机顶峰，达到了1056分；多核心达到1716分，相比之前2GHz时的880分提升了将近2倍，和容器云标称性能一致。同时内存io增大了，判断为cpu单线程性能增强后带来的增益，同样因此有一定增强的还有硬盘的4K写性能和1M读性能。 ​ 在后台还看到了硬盘的iops limit，为60K；上行带宽限制为50Mbps； ​ 作为对比，以下是华为的1c1g小鸡数据。可以发现cpu单核性能上限，华为云强了8%（上文的容器云单核880分测试并未达到单核最大值，多次测试得到的平均值在1070分左右）。内存io读写两家相近。华为云使用了最低配的云硬盘，因而硬盘io性能非常拉跨，升级硬盘有更好体验，不过要加钱，懒得再测了。 单线程性能测试 cpu 内存io 硬盘4K写 硬盘4K读 硬盘连续写 硬盘连续读 华为云（贵州） 高6% 相近 差别不大 云筏容器云（世纪互联） 相近 完胜 完胜 差别不大 完胜 ​ 注：以上测试内容，因为测试内容单一，测试次数不够多，测试环境可能有改变等原因，仅供参考。 ​ 接下来是极为漫长的unixbench，第二个容器（4GHz）的unixbench分数： 极限性能测试​ 云筏容器云支持最大96 cloudlets的容器，也就是38.4GHz的频率（超10GHz，全人类感谢3.84次），这怎么能不来玩一玩呢？ ​ 在environment下点击change environment topology即可调整拓扑以及配置。 ​ 配置设置页面不再展示。Lenmonbench 多次结果： ​ 可以看见，16核心的分配，资源很足，总分数破万了，这里给一个我的hz独服的测试分数（配置为i7-2600 16G 2*1T HDD Raid1） 作为参考 ​ 多线程分数是4.24倍，hz独服为价格21欧元，4.24倍相当于月付700元，而满配容器（50G硬盘）的价格是0.981￥每小时，相当于月付706元。也就是说在计算性能上，两者价格已经很接近了。 CPU性能分配猜想​ 一点猜想，容器云平台通过限制提供给容器的核心的频率来做到的限制最高性能。猜想是根据下图得来的： ​ 如上图，为96计算单位的最高配容器，提供了38.4GHz的计算频率，宿主机单核2.5GHz，38.4/2.5=15.36，为了凑够性能至少要16颗宿主机核心，容器也确实有16颗核心。提供给容器的16颗核心都运行在2.4GHz，总频率为2.4*16=38.4GHz，完全一致。新的问题来了，在跑多核计算的时候，如果限制了cpu上限频率，单核性能会不会被限制，是2.4GHz的成绩还是2.5GHz的成绩呢？ ​ 据推算，“单核限制频率”最低能达到1.4GHz，即总计2.8GHz频率下，至少要分配两颗核心，每颗核心最高只能达到1.4GHz。根据这个设置创建一个容器看看。 ​ 频率显示为1.4GHz，那么单线程性能受到影响了吗？跑个分看看。 ​ 如上图，单线程性能没有受到影响，我的想法不一致。所以这些字面数据没有意义。这意味着给出的频率即为性能指标，不会影响单核性能，当然多核心还是会受到影响的，猜测多核心满载时，频率自动降到这个基线上来。 内存测试​ 测试环境：38.4GHz+24G的最高配，测试工具：mbw ​ 测试内存量分别为1MB，4MB，64MB，8192MB，测试结果如下。 总结​ 做长期项目的性价比，能上独服当然更好。但我接的更多是几天做完的单，一般按月租的独服就浪费掉了，云筏容器云计算资源的价格对我来说还是很划算的，而且能根据负载计费，更灵活。 ​ 其次，云筏容器云容器量大的时候，出现抢占io的现象必然很频繁，那么io水平将达不到上述测试结果的水平。希望硬盘io不会让容器云变成垃圾场吧。 ​","categories":[{"name":"-[服务器测评]","slug":"服务器测评","permalink":"http://blog.levas.top/categories/服务器测评/"}],"tags":[{"name":"-[云筏] -[容器]","slug":"云筏-容器","permalink":"http://blog.levas.top/tags/云筏-容器/"}]},{"title":"绕创翼开wifi","slug":"绕创翼开wifi","date":"2019-06-08T08:08:46.000Z","updated":"2019-07-16T12:23:30.000Z","comments":true,"path":"2019/06/08/绕创翼开wifi/","link":"","permalink":"http://blog.levas.top/2019/06/08/绕创翼开wifi/","excerpt":"","text":"Overview 在一台长期开机的windows主机上用电信官网下载的NetKeeper客户端拨号。这台主机是连接了网线，并且能够访问内网资源的(例如：jwzx.cqupt.edu.cn) 在这台主机上搭一个ubuntu虚拟机，虚拟机需要有两块虚拟网卡，一块是nat，一块是桥接有线网卡 在ubuntu虚拟机上安装并配置pptpd 自动化(开机自启，断网检测，等脚本) 搭建步骤 硬件要求 一台空闲的物理机，长期开机。 有一块有线网卡，板载或usb转rj45 一台路由器(支持vpn如pptp，tp-link的一般都行) 环境准备 系统与软件 win7 或 win10 NetKeeper客户端 虚拟机或容器（不能是HyperV，因为HyperV会和NetKeeper冲突，docker和WSL都基于HyperV而无法使用） ubuntu16.04+ 镜像 windows镜像可以去MSDN我告诉你下载，也可以在内网的邮资源下载站系统镜像部分下载(邮资源下载站的windows系统镜像全部来自msdn我告诉你) NetKeeper在中国电信高校专区下载最新版 VMware请访问VMware官网首页寻找下载链接 ubuntu镜像下载途径 阿里云OPSX 内网邮资源镜像站ubuntu镜像 内网重邮镜像站 ubuntu的apt源可以设置为重邮镜像源，http://mirrors.cqupt.edu.cn/ubuntu 装系统 windows 虚拟机ubuntu 虚拟机配置(Vmware示例)： 给虚拟机加一块桥接网卡，桥接到物理机有线网卡上。确保虚拟机有两块网卡，一个是nat网卡，一个是桥接有线网卡（用来获得内网ip以供拨号连接） 开启虚拟机 安装pptpd 12apt-get updateapt-get install pptpd 配置/etc/pptpd.conf 删除以下行的注释 12#localip 192.168.0.1#remoteip 192.168.0.234-238,192.168.0.245 变为 12localip 192.168.0.1remoteip 192.168.0.234-238,192.168.0.245 解释： localip是vpn中ubuntu虚拟机的ip，remoteip是分配给连接vpn的设备的ip 配置/etc/ppp/pptpd-options 注释以下两行。这两行是用来加密vpn的，但会对pptpd的运行有影响，可以关掉。如果你需要加密就不要注释。 12require-mschap-v2require-mppe-128 设置dns，以下两行可改为 12ms-dns 202.202.32.33ms-dns 114.114.114.114 202.202.32.33是内网dns，作为主dns服务器 114是电信dns作为备选dns 配置vpn的用户和密码 /etc/ppp/chap-secrets 123# Secrets for authentication using CHAP# client server secret IP addresses用户名 pptpd 密码 * 每一行代表一个用户 每一行由四个部分组成。第一个是用户名，第二个（上图为pptpd）表示vpn的类型，第三个是密码，第四个(上图为*) 表示动态分配vpn的ip 重启pptpd 1/etc/init.d/pptpd restart 配置/etc/sysctl.conf 删除这一行的注释 1#net.ipv4.ip_forward=1 然后使配置生效 12sysctl -p/etc/init.d/procps restart 配置路由表 1234567891011#以下是设置nat转发iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -o 虚拟机的nat网卡名(比如ens33或者eth0) -j MASQUERADE#以下是设置双网卡默认路由route add -net 202.202.32.0/20 gw 桥接网卡的网关ip(172开头的)route add -net 172.16.0.0/12 gw 桥接网卡的网关ip(172开头的)route add -net 172.32.0.0/15 gw 桥接网卡的网关ip(172开头的)route add -net 211.83.208.0/20 gw 桥接网卡的网关ip(172开头的)route add -net 222.177.140.0/25 gw 桥接网卡的网关ip(172开头的)route add -net 219.153.62.64/26 gw 桥接网卡的网关ip(172开头的)route add -net 10.10.10.0/24 gw 桥接网卡的网关ip(172开头的) 虚拟机nat网卡和桥接网卡的网关ip可以通过ifconfig查看 注意：本路由表不是永久的，关机即灭失，每次开机需要重新运行。 配置pptpd开机自启 1systemctl enable pptpd.service ufw防火墙添加端口 1ufw allow 1723/tcp 如上配置完就应该可以访问拨号了。 访问的方式为： pptp拨号，无加密，服务器地址：桥接网卡的ip，用户名和密码为/etc/ppp/chap-secret 里写的 连接pptpd前请确保能够ping通桥接网卡ip 自动化 需要实现的 开机自动设置路由表 检测外部网络变化，如果网络不通则重启(如我的物理机网络从netkeeper变为wifi，那么虚拟机的外网访问可能会出问题，需要重启) 参照ubuntu18.04开机自启动脚本 我的ping脚本 大致作用是，ping www.baidu.com 如果ping的通说明网络没有问题，睡眠30秒。如果ping不通，说明需要重启恢复网络，那么连续ping2次，如果第二次还不通就重启。第二次通了就把计数置0并且睡眠30秒。 1234567891011121314151617#!/bin/shcount=&quot;0&quot;while truedo ping -c 5 -w 10 www.baidu.com if [ $? != 0 ];then echo &quot;target not approachable&quot; count=$((count+1)) else count=&quot;0&quot; sleep 30 fi if [ $count = &quot;2&quot; ]; then reboot fidone 使用 连wifi拨号，适用移动类设备(手机，平板），笔记本，台式机 连接CQUPT或者其他接入内网的wifi vpn 类型设为pptp 服务器地址为上面提及的虚拟机桥接网卡ip 用户名密码见上面配置。如果配置pptpd的时候设置了加密（见上文），那么客户端也需要设置加密。否则不要设置 注，CQUPT这个热点校园内很多地方都有，但是连上了之后可能暂时无法拨号，这种情况下需要等一段时间(几分钟)或者重新连接。只要搜得到CQUPT并且连的上，那么就一定可以拨pptp。 网线拨号，使用笔记本，台式机 用网线接入内网 vpn拨号同上 路由器拨号 连上路由器，进入管理员界面，tp-link的为网络参数页，其他的试试找一下wan口设置。设置为pptp拨号，拨号方式参考上面。","categories":[{"name":"-[局域网打造计划]","slug":"局域网打造计划","permalink":"http://blog.levas.top/categories/局域网打造计划/"}],"tags":[]},{"title":"nextcloud部署","slug":"nextcloud部署","date":"2019-03-29T14:10:58.000Z","updated":"2019-07-16T11:46:37.000Z","comments":true,"path":"2019/03/29/nextcloud部署/","link":"","permalink":"http://blog.levas.top/2019/03/29/nextcloud部署/","excerpt":"","text":"Overview system: deepin15.9 environment php7.2 mysql5.7 redis nginx nextcloud15.0.4 frp0.24.1 nextcloud无法运行在windows上，不然我就使用windows了。 frp用来内网穿透，允许公网访问。 环境安装12echo y | apt-get updateecho y | apt-get install mysql-server redis-server nginx php7.2 php7.2-fpm php7.2-gd php7.2-json php7.2-mysql php7.2-curl php7.2-mbstring php7.2-intl php-imagick php7.2-xml php7.2-zip php-redis php-apcu 数据库配置123create database nextcloud;create user &apos;nextcloud&apos;@&apos;localhost&apos; identified by &apos;123456&apos;;grant all privileges on nextcloud.* to &apos;nextcloud&apos;@&apos;localhost&apos;; nextcloud下载以及部署 在nextcloud官网 下载nextcloud的server包，解压之后放在/repository/ 下。你也可以放在别的地方，但nginx中的root路径要更改 nginx配置nginx.conf 确保nextcloud的文件夹的路径和server的root的地址一致 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194user www-data;worker_processes auto;pid /run/nginx.pid;include /etc/nginx/modules-enabled/*.conf;events &#123; worker_connections 768; # multi_accept on;&#125;http &#123; ## # Basic Settings ## sendfile on; tcp_nopush on; tcp_nodelay on; keepalive_timeout 65; types_hash_max_size 2048; # server_tokens off; # server_names_hash_bucket_size 64; # server_name_in_redirect off; include /etc/nginx/mime.types; default_type application/octet-stream; ## # SSL Settings ## ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE ssl_prefer_server_ciphers on; ## # Logging Settings ## access_log /var/log/nginx/access.log; error_log /var/log/nginx/error.log; ## # Gzip Settings ## server &#123; listen 80; listen [::]:80; server_name 127.0.0.1; add_header X-Content-Type-Options nosniff; add_header X-XSS-Protection &quot;1; mode=block&quot;; add_header X-Robots-Tag none; add_header X-Download-Options noopen; add_header X-Permitted-Cross-Domain-Policies none; add_header Referrer-Policy no-referrer; # Remove X-Powered-By, which is an information leak fastcgi_hide_header X-Powered-By; # Path to the root of your installation root /repository/nextcloud/; index index.php index.html; location = /robots.txt &#123; allow all; log_not_found off; access_log off; &#125; location = /.well-known/carddav &#123; return 301 $scheme://$host/remote.php/dav; &#125; location = /.well-known/caldav &#123; return 301 $scheme://$host/remote.php/dav; &#125; # set max upload size client_max_body_size 512M; fastcgi_buffers 64 4K; # Enable gzip but do not remove ETag headers gzip on; gzip_vary on; gzip_comp_level 4; gzip_min_length 256; gzip_proxied expired no-cache no-store private no_last_modified no_etag auth; gzip_types application/atom+xml application/javascript application/json application/ld+json application/manifest+json application/rss+xml application/vnd.geo+json application/vnd.ms-fontobject application/x-font-ttf application/x-web-app-manifest+json application/xhtml+xml application/xml font/opentype image/bmp image/svg+xml image/x-icon text/cache-manifest text/css text/plain text/vcard text/vnd.rim.location.xloc text/vtt text/x-component text/x-cross-domain-policy; # Uncomment if your server is build with the ngx_pagespeed module # This module is currently not supported. #pagespeed off; location / &#123; rewrite ^ /index.php$request_uri; &#125; location ~ ^\\/(?:build|tests|config|lib|3rdparty|templates|data)\\/ &#123; deny all; &#125; location ~ ^\\/(?:\\.|autotest|occ|issue|indie|db_|console) &#123; deny all; &#125; location ~ ^\\/(?:index|remote|public|cron|core\\/ajax\\/update|status|ocs\\/v[12]|updater\\/.+|ocs-provider\\/.+|ocm-provider\\/.+)\\.php(?:$|\\/) &#123; fastcgi_split_path_info ^(.+?\\.php)(\\/.*|)$; include fastcgi_params; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; fastcgi_param PATH_INFO $fastcgi_path_info; #Avoid sending the security headers twice fastcgi_param modHeadersAvailable true; fastcgi_param front_controller_active true; fastcgi_pass unix:/var/run/php/php7.2-fpm.sock; fastcgi_intercept_errors on; fastcgi_request_buffering off; &#125; location ~ ^\\/(?:updater|ocs-provider|ocm-provider)(?:$|\\/) &#123; try_files $uri/ =404; index index.php; &#125; # Adding the cache control header for js and css files # Make sure it is BELOW the PHP block location ~ \\.(?:css|js|woff2?|svg|gif)$ &#123; try_files $uri /index.php$request_uri; add_header Cache-Control &quot;public, max-age=15778463&quot;; # Add headers to serve security related headers (It is intended to # have those duplicated to the ones above) # Before enabling Strict-Transport-Security headers please read into # this topic first. # add_header Strict-Transport-Security &quot;max-age=15768000; includeSubDomains; preload;&quot;; # # WARNING: Only add the preload option once you read about # the consequences in https://hstspreload.org/. This option # will add the domain to a hardcoded list that is shipped # in all major browsers and getting removed from this list # could take several months. add_header X-Content-Type-Options nosniff; add_header X-XSS-Protection &quot;1; mode=block&quot;; add_header X-Robots-Tag none; add_header X-Download-Options noopen; add_header X-Permitted-Cross-Domain-Policies none; add_header Referrer-Policy no-referrer; # Optional: Don&apos;t log access to assets access_log off; &#125; location ~ \\.(?:png|html|ttf|ico|jpg|jpeg)$ &#123; try_files $uri /index.php$request_uri; # Optional: Don&apos;t log access to other assets access_log off; &#125; &#125; gzip on; # gzip_vary on; # gzip_proxied any; # gzip_comp_level 6; # gzip_buffers 16 8k; # gzip_http_version 1.1; # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript; ## # Virtual Host Configs ## include /etc/nginx/conf.d/*.conf; include /etc/nginx/sites-enabled/*;&#125;#mail &#123;# # See sample authentication script at:# # http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript# # # auth_http localhost/auth.php;# # pop3_capabilities &quot;TOP&quot; &quot;USER&quot;;# # imap_capabilities &quot;IMAP4rev1&quot; &quot;UIDPLUS&quot;;# # server &#123;# listen localhost:110;# protocol pop3;# proxy on;# &#125;# # server &#123;# listen localhost:143;# protocol imap;# proxy on;# &#125;#&#125; php配置php.ini12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697989910010110210310410510610710810911011111211311411511611711811912012112212312412512612712812913013113213313413513613713813914014114214314414514614714814915015115215315415515615715815916016116216316416516616716816917017117217317417517617717817918018118218318418518618718818919019119219319419519619719819920020120220320420520620720820921021121221321421521621721821922022122222322422522622722822923023123223323423523623723823924024124224324424524624724824925025125225325425525625725825926026126226326426526626726826927027127227327427527627727827928028128228328428528628728828929029129229329429529629729829930030130230330430530630730830931031131231331431531631731831932032132232332432532632732832933033133233333433533633733833934034134234334434534634734834935035135235335435535635735835936036136236336436536636736836937037137237337437537637737837938038138238338438538638738838939039139239339439539639739839940040140240340440540640740840941041141241341441541641741841942042142242342442542642742842943043143243343443543643743843944044144244344444544644744844945045145245345445545645745845946046146246346446546646746846947047147247347447547647747847948048148248348448548648748848949049149249349449549649749849950050150250350450550650750850951051151251351451551651751851952052152252352452552652752852953053153253353453553653753853954054154254354454554654754854955055155255355455555655755855956056156256356456556656756856957057157257357457557657757857958058158258358458558658758858959059159259359459559659759859960060160260360460560660760860961061161261361461561661761861962062162262362462562662762862963063163263363463563663763863964064164264364464564664764864965065165265365465565665765865966066166266366466566666766866967067167267367467567667767867968068168268368468568668768868969069169269369469569669769869970070170270370470570670770870971071171271371471571671771871972072172272372472572672772872973073173273373473573673773873974074174274374474574674774874975075175275375475575675775875976076176276376476576676776876977077177277377477577677777877978078178278378478578678778878979079179279379479579679779879980080180280380480580680780880981081181281381481581681781881982082182282382482582682782882983083183283383483583683783883984084184284384484584684784884985085185285385485585685785885986086186286386486586686786886987087187287387487587687787887988088188288388488588688788888989089189289389489589689789889990090190290390490590690790890991091191291391491591691791891992092192292392492592692792892993093193293393493593693793893994094194294394494594694794894995095195295395495595695795895996096196296396496596696796896997097197297397497597697797897998098198298398498598698798898999099199299399499599699799899910001001100210031004100510061007100810091010101110121013101410151016101710181019102010211022102310241025102610271028102910301031103210331034103510361037103810391040104110421043104410451046104710481049105010511052105310541055105610571058105910601061106210631064106510661067106810691070107110721073107410751076107710781079108010811082108310841085108610871088108910901091109210931094109510961097109810991100110111021103110411051106110711081109111011111112111311141115111611171118111911201121112211231124112511261127112811291130113111321133113411351136113711381139114011411142114311441145114611471148114911501151115211531154115511561157115811591160116111621163116411651166116711681169117011711172117311741175117611771178117911801181118211831184118511861187118811891190119111921193119411951196119711981199120012011202120312041205120612071208120912101211121212131214121512161217121812191220122112221223122412251226122712281229123012311232123312341235123612371238123912401241124212431244124512461247124812491250125112521253125412551256125712581259126012611262126312641265126612671268126912701271127212731274127512761277127812791280128112821283128412851286128712881289129012911292129312941295129612971298129913001301130213031304130513061307130813091310131113121313131413151316131713181319132013211322132313241325132613271328132913301331133213331334133513361337133813391340134113421343134413451346134713481349135013511352135313541355135613571358135913601361136213631364136513661367136813691370137113721373137413751376137713781379138013811382138313841385138613871388138913901391139213931394139513961397139813991400140114021403140414051406140714081409141014111412141314141415141614171418141914201421142214231424142514261427142814291430143114321433143414351436143714381439144014411442144314441445144614471448144914501451145214531454145514561457145814591460146114621463146414651466146714681469147014711472147314741475147614771478147914801481148214831484148514861487148814891490149114921493149414951496149714981499150015011502150315041505150615071508150915101511151215131514151515161517151815191520152115221523152415251526152715281529153015311532153315341535153615371538153915401541154215431544154515461547154815491550155115521553155415551556155715581559156015611562156315641565156615671568156915701571157215731574157515761577157815791580158115821583158415851586158715881589159015911592159315941595159615971598159916001601160216031604160516061607160816091610161116121613161416151616161716181619162016211622162316241625162616271628162916301631163216331634163516361637163816391640164116421643164416451646164716481649165016511652165316541655165616571658165916601661166216631664166516661667166816691670167116721673167416751676167716781679168016811682168316841685168616871688168916901691169216931694169516961697169816991700170117021703170417051706170717081709171017111712171317141715171617171718171917201721172217231724172517261727172817291730173117321733173417351736173717381739174017411742174317441745174617471748174917501751175217531754175517561757175817591760176117621763176417651766176717681769177017711772177317741775177617771778177917801781178217831784178517861787178817891790179117921793179417951796179717981799180018011802180318041805180618071808180918101811181218131814181518161817181818191820182118221823182418251826182718281829183018311832183318341835183618371838183918401841184218431844184518461847184818491850185118521853185418551856185718581859186018611862186318641865186618671868186918701871187218731874187518761877187818791880188118821883188418851886188718881889189018911892189318941895189618971898189919001901190219031904190519061907190819091910191119121913[PHP];;;;;;;;;;;;;;;;;;;; About php.ini ;;;;;;;;;;;;;;;;;;;;; PHP&apos;s initialization file, generally called php.ini, is responsible for; configuring many of the aspects of PHP&apos;s behavior.; PHP attempts to find and load this configuration from a number of locations.; The following is a summary of its search order:; 1. SAPI module specific location.; 2. The PHPRC environment variable. (As of PHP 5.2.0); 3. A number of predefined registry keys on Windows (As of PHP 5.2.0); 4. Current working directory (except CLI); 5. The web server&apos;s directory (for SAPI modules), or directory of PHP; (otherwise in Windows); 6. The directory from the --with-config-file-path compile time option, or the; Windows directory (C:\\windows or C:\\winnt); See the PHP docs for more specific information.; http://php.net/configuration.file; The syntax of the file is extremely simple. Whitespace and lines; beginning with a semicolon are silently ignored (as you probably guessed).; Section headers (e.g. [Foo]) are also silently ignored, even though; they might mean something in the future.; Directives following the section heading [PATH=/www/mysite] only; apply to PHP files in the /www/mysite directory. Directives; following the section heading [HOST=www.example.com] only apply to; PHP files served from www.example.com. Directives set in these; special sections cannot be overridden by user-defined INI files or; at runtime. Currently, [PATH=] and [HOST=] sections only work under; CGI/FastCGI.; http://php.net/ini.sections; Directives are specified using the following syntax:; directive = value; Directive names are *case sensitive* - foo=bar is different from FOO=bar.; Directives are variables used to configure PHP or PHP extensions.; There is no name validation. If PHP can&apos;t find an expected; directive because it is not set or is mistyped, a default value will be used.; The value can be a string, a number, a PHP constant (e.g. E_ALL or M_PI), one; of the INI constants (On, Off, True, False, Yes, No and None) or an expression; (e.g. E_ALL &amp; ~E_NOTICE), a quoted string (&quot;bar&quot;), or a reference to a; previously set variable or directive (e.g. $&#123;foo&#125;); Expressions in the INI file are limited to bitwise operators and parentheses:; | bitwise OR; ^ bitwise XOR; &amp; bitwise AND; ~ bitwise NOT; ! boolean NOT; Boolean flags can be turned on using the values 1, On, True or Yes.; They can be turned off using the values 0, Off, False or No.; An empty string can be denoted by simply not writing anything after the equal; sign, or by using the None keyword:; foo = ; sets foo to an empty string; foo = None ; sets foo to an empty string; foo = &quot;None&quot; ; sets foo to the string &apos;None&apos;; If you use constants in your value, and these constants belong to a; dynamically loaded extension (either a PHP extension or a Zend extension),; you may only use these constants *after* the line that loads the extension.;;;;;;;;;;;;;;;;;;;; About this file ;;;;;;;;;;;;;;;;;;;;; PHP comes packaged with two INI files. One that is recommended to be used; in production environments and one that is recommended to be used in; development environments.; php.ini-production contains settings which hold security, performance and; best practices at its core. But please be aware, these settings may break; compatibility with older or less security conscience applications. We; recommending using the production ini in production and testing environments.; php.ini-development is very similar to its production variant, except it is; much more verbose when it comes to errors. We recommend using the; development version only in development environments, as errors shown to; application users can inadvertently leak otherwise secure information.; This is php.ini-production INI file.;;;;;;;;;;;;;;;;;;;; Quick Reference ;;;;;;;;;;;;;;;;;;;;; The following are all the settings which are different in either the production; or development versions of the INIs with respect to PHP&apos;s default behavior.; Please see the actual settings later in the document for more details as to why; we recommend these changes in PHP&apos;s behavior.; display_errors; Default Value: On; Development Value: On; Production Value: Off; display_startup_errors; Default Value: Off; Development Value: On; Production Value: Off; error_reporting; Default Value: E_ALL &amp; ~E_NOTICE &amp; ~E_STRICT &amp; ~E_DEPRECATED; Development Value: E_ALL; Production Value: E_ALL &amp; ~E_DEPRECATED &amp; ~E_STRICT; html_errors; Default Value: On; Development Value: On; Production value: On; log_errors; Default Value: Off; Development Value: On; Production Value: On; max_input_time; Default Value: -1 (Unlimited); Development Value: 60 (60 seconds); Production Value: 60 (60 seconds); output_buffering; Default Value: Off; Development Value: 4096; Production Value: 4096; register_argc_argv; Default Value: On; Development Value: Off; Production Value: Off; request_order; Default Value: None; Development Value: &quot;GP&quot;; Production Value: &quot;GP&quot;; session.gc_divisor; Default Value: 100; Development Value: 1000; Production Value: 1000; session.sid_bits_per_character; Default Value: 4; Development Value: 5; Production Value: 5; short_open_tag; Default Value: On; Development Value: Off; Production Value: Off; track_errors; Default Value: Off; Development Value: On; Production Value: Off; variables_order; Default Value: &quot;EGPCS&quot;; Development Value: &quot;GPCS&quot;; Production Value: &quot;GPCS&quot;;;;;;;;;;;;;;;;;;;;;; php.ini Options ;;;;;;;;;;;;;;;;;;;;;; Name for user-defined php.ini (.htaccess) files. Default is &quot;.user.ini&quot;;user_ini.filename = &quot;.user.ini&quot;; To disable this feature set this option to empty value;user_ini.filename =; TTL for user-defined php.ini files (time-to-live) in seconds. Default is 300 seconds (5 minutes);user_ini.cache_ttl = 300;;;;;;;;;;;;;;;;;;;;; Language Options ;;;;;;;;;;;;;;;;;;;;;; Enable the PHP scripting language engine under Apache.; http://php.net/engineengine = On; This directive determines whether or not PHP will recognize code between; &lt;? and ?&gt; tags as PHP source which should be processed as such. It is; generally recommended that &lt;?php and ?&gt; should be used and that this feature; should be disabled, as enabling it may result in issues when generating XML; documents, however this remains supported for backward compatibility reasons.; Note that this directive does not control the &lt;?= shorthand tag, which can be; used regardless of this directive.; Default Value: On; Development Value: Off; Production Value: Off; http://php.net/short-open-tagshort_open_tag = Off; The number of significant digits displayed in floating point numbers.; http://php.net/precisionprecision = 14; Output buffering is a mechanism for controlling how much output data; (excluding headers and cookies) PHP should keep internally before pushing that; data to the client. If your application&apos;s output exceeds this setting, PHP; will send that data in chunks of roughly the size you specify.; Turning on this setting and managing its maximum buffer size can yield some; interesting side-effects depending on your application and web server.; You may be able to send headers and cookies after you&apos;ve already sent output; through print or echo. You also may see performance benefits if your server is; emitting less packets due to buffered output versus PHP streaming the output; as it gets it. On production servers, 4096 bytes is a good setting for performance; reasons.; Note: Output buffering can also be controlled via Output Buffering Control; functions.; Possible Values:; On = Enabled and buffer is unlimited. (Use with caution); Off = Disabled; Integer = Enables the buffer and sets its maximum size in bytes.; Note: This directive is hardcoded to Off for the CLI SAPI; Default Value: Off; Development Value: 4096; Production Value: 4096; http://php.net/output-bufferingoutput_buffering = 4096; You can redirect all of the output of your scripts to a function. For; example, if you set output_handler to &quot;mb_output_handler&quot;, character; encoding will be transparently converted to the specified encoding.; Setting any output handler automatically turns on output buffering.; Note: People who wrote portable scripts should not depend on this ini; directive. Instead, explicitly set the output handler using ob_start().; Using this ini directive may cause problems unless you know what script; is doing.; Note: You cannot use both &quot;mb_output_handler&quot; with &quot;ob_iconv_handler&quot;; and you cannot use both &quot;ob_gzhandler&quot; and &quot;zlib.output_compression&quot;.; Note: output_handler must be empty if this is set &apos;On&apos; !!!!; Instead you must use zlib.output_handler.; http://php.net/output-handler;output_handler =; URL rewriter function rewrites URL on the fly by using; output buffer. You can set target tags by this configuration.; &quot;form&quot; tag is special tag. It will add hidden input tag to pass values.; Refer to session.trans_sid_tags for usage.; Default Value: &quot;form=&quot;; Development Value: &quot;form=&quot;; Production Value: &quot;form=&quot;;url_rewriter.tags; URL rewriter will not rewrites absolute URL nor form by default. To enable; absolute URL rewrite, allowed hosts must be defined at RUNTIME.; Refer to session.trans_sid_hosts for more details.; Default Value: &quot;&quot;; Development Value: &quot;&quot;; Production Value: &quot;&quot;;url_rewriter.hosts; Transparent output compression using the zlib library; Valid values for this option are &apos;off&apos;, &apos;on&apos;, or a specific buffer size; to be used for compression (default is 4KB); Note: Resulting chunk size may vary due to nature of compression. PHP; outputs chunks that are few hundreds bytes each as a result of; compression. If you prefer a larger chunk size for better; performance, enable output_buffering in addition.; Note: You need to use zlib.output_handler instead of the standard; output_handler, or otherwise the output will be corrupted.; http://php.net/zlib.output-compressionzlib.output_compression = Off; http://php.net/zlib.output-compression-level;zlib.output_compression_level = -1; You cannot specify additional output handlers if zlib.output_compression; is activated here. This setting does the same as output_handler but in; a different order.; http://php.net/zlib.output-handler;zlib.output_handler =; Implicit flush tells PHP to tell the output layer to flush itself; automatically after every output block. This is equivalent to calling the; PHP function flush() after each and every call to print() or echo() and each; and every HTML block. Turning this option on has serious performance; implications and is generally recommended for debugging purposes only.; http://php.net/implicit-flush; Note: This directive is hardcoded to On for the CLI SAPIimplicit_flush = Off; The unserialize callback function will be called (with the undefined class&apos;; name as parameter), if the unserializer finds an undefined class; which should be instantiated. A warning appears if the specified function is; not defined, or if the function doesn&apos;t include/implement the missing class.; So only set this entry, if you really want to implement such a; callback-function.unserialize_callback_func =; When floats &amp; doubles are serialized, store serialize_precision significant; digits after the floating point. The default value ensures that when floats; are decoded with unserialize, the data will remain the same.; The value is also used for json_encode when encoding double values.; If -1 is used, then dtoa mode 0 is used which automatically select the best; precision.serialize_precision = -1; open_basedir, if set, limits all file operations to the defined directory; and below. This directive makes most sense if used in a per-directory; or per-virtualhost web server configuration file.; http://php.net/open-basedir;open_basedir =; This directive allows you to disable certain functions for security reasons.; It receives a comma-delimited list of function names.; http://php.net/disable-functionsdisable_functions = pcntl_alarm,pcntl_fork,pcntl_waitpid,pcntl_wait,pcntl_wifexited,pcntl_wifstopped,pcntl_wifsignaled,pcntl_wifcontinued,pcntl_wexitstatus,pcntl_wtermsig,pcntl_wstopsig,pcntl_signal,pcntl_signal_get_handler,pcntl_signal_dispatch,pcntl_get_last_error,pcntl_strerror,pcntl_sigprocmask,pcntl_sigwaitinfo,pcntl_sigtimedwait,pcntl_exec,pcntl_getpriority,pcntl_setpriority,pcntl_async_signals,; This directive allows you to disable certain classes for security reasons.; It receives a comma-delimited list of class names.; http://php.net/disable-classesdisable_classes =; Colors for Syntax Highlighting mode. Anything that&apos;s acceptable in; &lt;span style=&quot;color: ???????&quot;&gt; would work.; http://php.net/syntax-highlighting;highlight.string = #DD0000;highlight.comment = #FF9900;highlight.keyword = #007700;highlight.default = #0000BB;highlight.html = #000000; If enabled, the request will be allowed to complete even if the user aborts; the request. Consider enabling it if executing long requests, which may end up; being interrupted by the user or a browser timing out. PHP&apos;s default behavior; is to disable this feature.; http://php.net/ignore-user-abort;ignore_user_abort = On; Determines the size of the realpath cache to be used by PHP. This value should; be increased on systems where PHP opens many files to reflect the quantity of; the file operations performed.; http://php.net/realpath-cache-size;realpath_cache_size = 4096k; Duration of time, in seconds for which to cache realpath information for a given; file or directory. For systems with rarely changing files, consider increasing this; value.; http://php.net/realpath-cache-ttl;realpath_cache_ttl = 120; Enables or disables the circular reference collector.; http://php.net/zend.enable-gczend.enable_gc = On; If enabled, scripts may be written in encodings that are incompatible with; the scanner. CP936, Big5, CP949 and Shift_JIS are the examples of such; encodings. To use this feature, mbstring extension must be enabled.; Default: Off;zend.multibyte = Off; Allows to set the default encoding for the scripts. This value will be used; unless &quot;declare(encoding=...)&quot; directive appears at the top of the script.; Only affects if zend.multibyte is set.; Default: &quot;&quot;;zend.script_encoding =;;;;;;;;;;;;;;;;;; Miscellaneous ;;;;;;;;;;;;;;;;;;; Decides whether PHP may expose the fact that it is installed on the server; (e.g. by adding its signature to the Web server header). It is no security; threat in any way, but it makes it possible to determine whether you use PHP; on your server or not.; http://php.net/expose-phpexpose_php = Off;;;;;;;;;;;;;;;;;;;; Resource Limits ;;;;;;;;;;;;;;;;;;;;; Maximum execution time of each script, in seconds; http://php.net/max-execution-time; Note: This directive is hardcoded to 0 for the CLI SAPImax_execution_time = 30; Maximum amount of time each script may spend parsing request data. It&apos;s a good; idea to limit this time on productions servers in order to eliminate unexpectedly; long running scripts.; Note: This directive is hardcoded to -1 for the CLI SAPI; Default Value: -1 (Unlimited); Development Value: 60 (60 seconds); Production Value: 60 (60 seconds); http://php.net/max-input-timemax_input_time = 60; Maximum input variable nesting level; http://php.net/max-input-nesting-level;max_input_nesting_level = 64; How many GET/POST/COOKIE input variables may be accepted; max_input_vars = 1000; Maximum amount of memory a script may consume (128MB); http://php.net/memory-limitmemory_limit = 128M;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; Error handling and logging ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; This directive informs PHP of which errors, warnings and notices you would like; it to take action for. The recommended way of setting values for this; directive is through the use of the error level constants and bitwise; operators. The error level constants are below here for convenience as well as; some common settings and their meanings.; By default, PHP is set to take action on all errors, notices and warnings EXCEPT; those related to E_NOTICE and E_STRICT, which together cover best practices and; recommended coding standards in PHP. For performance reasons, this is the; recommend error reporting setting. Your production server shouldn&apos;t be wasting; resources complaining about best practices and coding standards. That&apos;s what; development servers and development settings are for.; Note: The php.ini-development file has this setting as E_ALL. This; means it pretty much reports everything which is exactly what you want during; development and early testing.;; Error Level Constants:; E_ALL - All errors and warnings (includes E_STRICT as of PHP 5.4.0); E_ERROR - fatal run-time errors; E_RECOVERABLE_ERROR - almost fatal run-time errors; E_WARNING - run-time warnings (non-fatal errors); E_PARSE - compile-time parse errors; E_NOTICE - run-time notices (these are warnings which often result; from a bug in your code, but it&apos;s possible that it was; intentional (e.g., using an uninitialized variable and; relying on the fact it is automatically initialized to an; empty string); E_STRICT - run-time notices, enable to have PHP suggest changes; to your code which will ensure the best interoperability; and forward compatibility of your code; E_CORE_ERROR - fatal errors that occur during PHP&apos;s initial startup; E_CORE_WARNING - warnings (non-fatal errors) that occur during PHP&apos;s; initial startup; E_COMPILE_ERROR - fatal compile-time errors; E_COMPILE_WARNING - compile-time warnings (non-fatal errors); E_USER_ERROR - user-generated error message; E_USER_WARNING - user-generated warning message; E_USER_NOTICE - user-generated notice message; E_DEPRECATED - warn about code that will not work in future versions; of PHP; E_USER_DEPRECATED - user-generated deprecation warnings;; Common Values:; E_ALL (Show all errors, warnings and notices including coding standards.); E_ALL &amp; ~E_NOTICE (Show all errors, except for notices); E_ALL &amp; ~E_NOTICE &amp; ~E_STRICT (Show all errors, except for notices and coding standards warnings.); E_COMPILE_ERROR|E_RECOVERABLE_ERROR|E_ERROR|E_CORE_ERROR (Show only errors); Default Value: E_ALL &amp; ~E_NOTICE &amp; ~E_STRICT &amp; ~E_DEPRECATED; Development Value: E_ALL; Production Value: E_ALL &amp; ~E_DEPRECATED &amp; ~E_STRICT; http://php.net/error-reportingerror_reporting = E_ALL &amp; ~E_DEPRECATED &amp; ~E_STRICT; This directive controls whether or not and where PHP will output errors,; notices and warnings too. Error output is very useful during development, but; it could be very dangerous in production environments. Depending on the code; which is triggering the error, sensitive information could potentially leak; out of your application such as database usernames and passwords or worse.; For production environments, we recommend logging errors rather than; sending them to STDOUT.; Possible Values:; Off = Do not display any errors; stderr = Display errors to STDERR (affects only CGI/CLI binaries!); On or stdout = Display errors to STDOUT; Default Value: On; Development Value: On; Production Value: Off; http://php.net/display-errorsdisplay_errors = Off; The display of errors which occur during PHP&apos;s startup sequence are handled; separately from display_errors. PHP&apos;s default behavior is to suppress those; errors from clients. Turning the display of startup errors on can be useful in; debugging configuration problems. We strongly recommend you; set this to &apos;off&apos; for production servers.; Default Value: Off; Development Value: On; Production Value: Off; http://php.net/display-startup-errorsdisplay_startup_errors = Off; Besides displaying errors, PHP can also log errors to locations such as a; server-specific log, STDERR, or a location specified by the error_log; directive found below. While errors should not be displayed on productions; servers they should still be monitored and logging is a great way to do that.; Default Value: Off; Development Value: On; Production Value: On; http://php.net/log-errorslog_errors = On; Set maximum length of log_errors. In error_log information about the source is; added. The default is 1024 and 0 allows to not apply any maximum length at all.; http://php.net/log-errors-max-lenlog_errors_max_len = 1024; Do not log repeated messages. Repeated errors must occur in same file on same; line unless ignore_repeated_source is set true.; http://php.net/ignore-repeated-errorsignore_repeated_errors = Off; Ignore source of message when ignoring repeated messages. When this setting; is On you will not log errors with repeated messages from different files or; source lines.; http://php.net/ignore-repeated-sourceignore_repeated_source = Off; If this parameter is set to Off, then memory leaks will not be shown (on; stdout or in the log). This has only effect in a debug compile, and if; error reporting includes E_WARNING in the allowed list; http://php.net/report-memleaksreport_memleaks = On; This setting is on by default.;report_zend_debug = 0; Store the last error/warning message in $php_errormsg (boolean). Setting this value; to On can assist in debugging and is appropriate for development servers. It should; however be disabled on production servers.; This directive is DEPRECATED.; Default Value: Off; Development Value: Off; Production Value: Off; http://php.net/track-errors;track_errors = Off; Turn off normal error reporting and emit XML-RPC error XML; http://php.net/xmlrpc-errors;xmlrpc_errors = 0; An XML-RPC faultCode;xmlrpc_error_number = 0; When PHP displays or logs an error, it has the capability of formatting the; error message as HTML for easier reading. This directive controls whether; the error message is formatted as HTML or not.; Note: This directive is hardcoded to Off for the CLI SAPI; Default Value: On; Development Value: On; Production value: On; http://php.net/html-errorshtml_errors = On; If html_errors is set to On *and* docref_root is not empty, then PHP; produces clickable error messages that direct to a page describing the error; or function causing the error in detail.; You can download a copy of the PHP manual from http://php.net/docs; and change docref_root to the base URL of your local copy including the; leading &apos;/&apos;. You must also specify the file extension being used including; the dot. PHP&apos;s default behavior is to leave these settings empty, in which; case no links to documentation are generated.; Note: Never use this feature for production boxes.; http://php.net/docref-root; Examples;docref_root = &quot;/phpmanual/&quot;; http://php.net/docref-ext;docref_ext = .html; String to output before an error message. PHP&apos;s default behavior is to leave; this setting blank.; http://php.net/error-prepend-string; Example:;error_prepend_string = &quot;&lt;span style=&apos;color: #ff0000&apos;&gt;&quot;; String to output after an error message. PHP&apos;s default behavior is to leave; this setting blank.; http://php.net/error-append-string; Example:;error_append_string = &quot;&lt;/span&gt;&quot;; Log errors to specified file. PHP&apos;s default behavior is to leave this value; empty.; http://php.net/error-log; Example:;error_log = php_errors.log; Log errors to syslog (Event Log on Windows).;error_log = syslog;windows.show_crt_warning; Default value: 0; Development value: 0; Production value: 0;;;;;;;;;;;;;;;;;; Data Handling ;;;;;;;;;;;;;;;;;;; The separator used in PHP generated URLs to separate arguments.; PHP&apos;s default setting is &quot;&amp;&quot;.; http://php.net/arg-separator.output; Example:;arg_separator.output = &quot;&amp;amp;&quot;; List of separator(s) used by PHP to parse input URLs into variables.; PHP&apos;s default setting is &quot;&amp;&quot;.; NOTE: Every character in this directive is considered as separator!; http://php.net/arg-separator.input; Example:;arg_separator.input = &quot;;&amp;&quot;; This directive determines which super global arrays are registered when PHP; starts up. G,P,C,E &amp; S are abbreviations for the following respective super; globals: GET, POST, COOKIE, ENV and SERVER. There is a performance penalty; paid for the registration of these arrays and because ENV is not as commonly; used as the others, ENV is not recommended on productions servers. You; can still get access to the environment variables through getenv() should you; need to.; Default Value: &quot;EGPCS&quot;; Development Value: &quot;GPCS&quot;; Production Value: &quot;GPCS&quot;;; http://php.net/variables-ordervariables_order = &quot;GPCS&quot;; This directive determines which super global data (G,P &amp; C) should be; registered into the super global array REQUEST. If so, it also determines; the order in which that data is registered. The values for this directive; are specified in the same manner as the variables_order directive,; EXCEPT one. Leaving this value empty will cause PHP to use the value set; in the variables_order directive. It does not mean it will leave the super; globals array REQUEST empty.; Default Value: None; Development Value: &quot;GP&quot;; Production Value: &quot;GP&quot;; http://php.net/request-orderrequest_order = &quot;GP&quot;; This directive determines whether PHP registers $argv &amp; $argc each time it; runs. $argv contains an array of all the arguments passed to PHP when a script; is invoked. $argc contains an integer representing the number of arguments; that were passed when the script was invoked. These arrays are extremely; useful when running scripts from the command line. When this directive is; enabled, registering these variables consumes CPU cycles and memory each time; a script is executed. For performance reasons, this feature should be disabled; on production servers.; Note: This directive is hardcoded to On for the CLI SAPI; Default Value: On; Development Value: Off; Production Value: Off; http://php.net/register-argc-argvregister_argc_argv = Off; When enabled, the ENV, REQUEST and SERVER variables are created when they&apos;re; first used (Just In Time) instead of when the script starts. If these; variables are not used within a script, having this directive on will result; in a performance gain. The PHP directive register_argc_argv must be disabled; for this directive to have any affect.; http://php.net/auto-globals-jitauto_globals_jit = On; Whether PHP will read the POST data.; This option is enabled by default.; Most likely, you won&apos;t want to disable this option globally. It causes $_POST; and $_FILES to always be empty; the only way you will be able to read the; POST data will be through the php://input stream wrapper. This can be useful; to proxy requests or to process the POST data in a memory efficient fashion.; http://php.net/enable-post-data-reading;enable_post_data_reading = Off; Maximum size of POST data that PHP will accept.; Its value may be 0 to disable the limit. It is ignored if POST data reading; is disabled through enable_post_data_reading.; http://php.net/post-max-sizepost_max_size = 8M; Automatically add files before PHP document.; http://php.net/auto-prepend-fileauto_prepend_file =; Automatically add files after PHP document.; http://php.net/auto-append-fileauto_append_file =; By default, PHP will output a media type using the Content-Type header. To; disable this, simply set it to be empty.;; PHP&apos;s built-in default media type is set to text/html.; http://php.net/default-mimetypedefault_mimetype = &quot;text/html&quot;; PHP&apos;s default character set is set to UTF-8.; http://php.net/default-charsetdefault_charset = &quot;UTF-8&quot;; PHP internal character encoding is set to empty.; If empty, default_charset is used.; http://php.net/internal-encoding;internal_encoding =; PHP input character encoding is set to empty.; If empty, default_charset is used.; http://php.net/input-encoding;input_encoding =; PHP output character encoding is set to empty.; If empty, default_charset is used.; See also output_buffer.; http://php.net/output-encoding;output_encoding =;;;;;;;;;;;;;;;;;;;;;;;;;; Paths and Directories ;;;;;;;;;;;;;;;;;;;;;;;;;;; UNIX: &quot;/path1:/path2&quot;;include_path = &quot;.:/usr/share/php&quot;;; Windows: &quot;\\path1;\\path2&quot;;include_path = &quot;.;c:\\php\\includes&quot;;; PHP&apos;s default setting for include_path is &quot;.;/path/to/php/pear&quot;; http://php.net/include-path; The root of the PHP pages, used only if nonempty.; if PHP was not compiled with FORCE_REDIRECT, you SHOULD set doc_root; if you are running php as a CGI under any web server (other than IIS); see documentation for security issues. The alternate is to use the; cgi.force_redirect configuration below; http://php.net/doc-rootdoc_root =; The directory under which PHP opens the script using /~username used only; if nonempty.; http://php.net/user-diruser_dir =; Directory in which the loadable extensions (modules) reside.; http://php.net/extension-dir; extension_dir = &quot;./&quot;; On windows:; extension_dir = &quot;ext&quot;; Directory where the temporary files should be placed.; Defaults to the system default (see sys_get_temp_dir); sys_temp_dir = &quot;/tmp&quot;; Whether or not to enable the dl() function. The dl() function does NOT work; properly in multithreaded servers, such as IIS or Zeus, and is automatically; disabled on them.; http://php.net/enable-dlenable_dl = Off; cgi.force_redirect is necessary to provide security running PHP as a CGI under; most web servers. Left undefined, PHP turns this on by default. You can; turn it off here AT YOUR OWN RISK; **You CAN safely turn this off for IIS, in fact, you MUST.**; http://php.net/cgi.force-redirect;cgi.force_redirect = 1; if cgi.nph is enabled it will force cgi to always sent Status: 200 with; every request. PHP&apos;s default behavior is to disable this feature.;cgi.nph = 1; if cgi.force_redirect is turned on, and you are not running under Apache or Netscape; (iPlanet) web servers, you MAY need to set an environment variable name that PHP; will look for to know it is OK to continue execution. Setting this variable MAY; cause security issues, KNOW WHAT YOU ARE DOING FIRST.; http://php.net/cgi.redirect-status-env;cgi.redirect_status_env =; cgi.fix_pathinfo provides *real* PATH_INFO/PATH_TRANSLATED support for CGI. PHP&apos;s; previous behaviour was to set PATH_TRANSLATED to SCRIPT_FILENAME, and to not grok; what PATH_INFO is. For more information on PATH_INFO, see the cgi specs. Setting; this to 1 will cause PHP CGI to fix its paths to conform to the spec. A setting; of zero causes PHP to behave as before. Default is 1. You should fix your scripts; to use SCRIPT_FILENAME rather than PATH_TRANSLATED.; http://php.net/cgi.fix-pathinfo;cgi.fix_pathinfo=1; if cgi.discard_path is enabled, the PHP CGI binary can safely be placed outside; of the web tree and people will not be able to circumvent .htaccess security.; http://php.net/cgi.dicard-path;cgi.discard_path=1; FastCGI under IIS (on WINNT based OS) supports the ability to impersonate; security tokens of the calling client. This allows IIS to define the; security context that the request runs under. mod_fastcgi under Apache; does not currently support this feature (03/17/2002); Set to 1 if running under IIS. Default is zero.; http://php.net/fastcgi.impersonate;fastcgi.impersonate = 1; Disable logging through FastCGI connection. PHP&apos;s default behavior is to enable; this feature.;fastcgi.logging = 0; cgi.rfc2616_headers configuration option tells PHP what type of headers to; use when sending HTTP response code. If set to 0, PHP sends Status: header that; is supported by Apache. When this option is set to 1, PHP will send; RFC2616 compliant header.; Default is zero.; http://php.net/cgi.rfc2616-headers;cgi.rfc2616_headers = 0; cgi.check_shebang_line controls whether CGI PHP checks for line starting with #!; (shebang) at the top of the running script. This line might be needed if the; script support running both as stand-alone script and via PHP CGI&lt;. PHP in CGI; mode skips this line and ignores its content if this directive is turned on.; http://php.net/cgi.check-shebang-line;cgi.check_shebang_line=1;;;;;;;;;;;;;;;;; File Uploads ;;;;;;;;;;;;;;;;;; Whether to allow HTTP file uploads.; http://php.net/file-uploadsfile_uploads = On; Temporary directory for HTTP uploaded files (will use system default if not; specified).; http://php.net/upload-tmp-dir;upload_tmp_dir =; Maximum allowed size for uploaded files.; http://php.net/upload-max-filesizeupload_max_filesize = 2M; Maximum number of files that can be uploaded via a single requestmax_file_uploads = 20;;;;;;;;;;;;;;;;;;; Fopen wrappers ;;;;;;;;;;;;;;;;;;;; Whether to allow the treatment of URLs (like http:// or ftp://) as files.; http://php.net/allow-url-fopenallow_url_fopen = On; Whether to allow include/require to open URLs (like http:// or ftp://) as files.; http://php.net/allow-url-includeallow_url_include = Off; Define the anonymous ftp password (your email address). PHP&apos;s default setting; for this is empty.; http://php.net/from;from=&quot;john@doe.com&quot;; Define the User-Agent string. PHP&apos;s default setting for this is empty.; http://php.net/user-agent;user_agent=&quot;PHP&quot;; Default timeout for socket based streams (seconds); http://php.net/default-socket-timeoutdefault_socket_timeout = 60; If your scripts have to deal with files from Macintosh systems,; or you are running on a Mac and need to deal with files from; unix or win32 systems, setting this flag will cause PHP to; automatically detect the EOL character in those files so that; fgets() and file() will work regardless of the source of the file.; http://php.net/auto-detect-line-endings;auto_detect_line_endings = Off;;;;;;;;;;;;;;;;;;;;;;; Dynamic Extensions ;;;;;;;;;;;;;;;;;;;;;;;; If you wish to have an extension loaded automatically, use the following; syntax:;; extension=modulename;; For example:;; extension=mysqli; ; When the extension library to load is not located in the default extension; directory, You may specify an absolute path to the library file:;; extension=/path/to/extension/mysqli.so;; Note : The syntax used in previous PHP versions (&apos;extension=&lt;ext&gt;.so&apos; and; &apos;extension=&apos;php_&lt;ext&gt;.dll&apos;) is supported for legacy reasons and may be; deprecated in a future PHP major version. So, when it is possible, please; move to the new (&apos;extension=&lt;ext&gt;) syntax.;; Notes for Windows environments :;; - ODBC support is built in, so no dll is needed for it.; - Many DLL files are located in the extensions/ (PHP 4) or ext/ (PHP 5+); extension folders as well as the separate PECL DLL download (PHP 5+).; Be sure to appropriately set the extension_dir directive.;extension=bz2extension=curlextension=fileinfoextension=gd2extension=gettextextension=gmpextension=intlextension=imapextension=interbaseextension=ldapextension=mbstringextension=exif ; Must be after mbstring as it depends on itextension=mysqliextension=oci8_12c ; Use with Oracle Database 12c Instant Clientextension=opensslextension=pdo_firebirdextension=pdo_mysqlextension=pdo_ociextension=pdo_odbcextension=pdo_pgsqlextension=pdo_sqliteextension=pgsqlextension=shmop; The MIBS data available in the PHP distribution must be installed.; See http://www.php.net/manual/en/snmp.installation.phpextension=snmpextension=soapextension=socketsextension=sqlite3extension=tidyextension=xmlrpcextension=xsl;;;;;;;;;;;;;;;;;;;; Module Settings ;;;;;;;;;;;;;;;;;;;;[CLI Server]; Whether the CLI web server uses ANSI color coding in its terminal output.cli_server.color = On[Date]; Defines the default timezone used by the date functions; http://php.net/date.timezone;date.timezone =; http://php.net/date.default-latitude;date.default_latitude = 31.7667; http://php.net/date.default-longitude;date.default_longitude = 35.2333; http://php.net/date.sunrise-zenith;date.sunrise_zenith = 90.583333; http://php.net/date.sunset-zenith;date.sunset_zenith = 90.583333[filter]; http://php.net/filter.default;filter.default = unsafe_raw; http://php.net/filter.default-flags;filter.default_flags =[iconv]; Use of this INI entry is deprecated, use global input_encoding instead.; If empty, default_charset or input_encoding or iconv.input_encoding is used.; The precedence is: default_charset &lt; intput_encoding &lt; iconv.input_encoding;iconv.input_encoding =; Use of this INI entry is deprecated, use global internal_encoding instead.; If empty, default_charset or internal_encoding or iconv.internal_encoding is used.; The precedence is: default_charset &lt; internal_encoding &lt; iconv.internal_encoding;iconv.internal_encoding =; Use of this INI entry is deprecated, use global output_encoding instead.; If empty, default_charset or output_encoding or iconv.output_encoding is used.; The precedence is: default_charset &lt; output_encoding &lt; iconv.output_encoding; To use an output encoding conversion, iconv&apos;s output handler must be set; otherwise output encoding conversion cannot be performed.;iconv.output_encoding =[intl];intl.default_locale =; This directive allows you to produce PHP errors when some error; happens within intl functions. The value is the level of the error produced.; Default is 0, which does not produce any errors.;intl.error_level = E_WARNING;intl.use_exceptions = 0[sqlite3];sqlite3.extension_dir =[Pcre];PCRE library backtracking limit.; http://php.net/pcre.backtrack-limit;pcre.backtrack_limit=100000;PCRE library recursion limit.;Please note that if you set this value to a high number you may consume all;the available process stack and eventually crash PHP (due to reaching the;stack size limit imposed by the Operating System).; http://php.net/pcre.recursion-limit;pcre.recursion_limit=100000;Enables or disables JIT compilation of patterns. This requires the PCRE;library to be compiled with JIT support.;pcre.jit=1[Pdo]; Whether to pool ODBC connections. Can be one of &quot;strict&quot;, &quot;relaxed&quot; or &quot;off&quot;; http://php.net/pdo-odbc.connection-pooling;pdo_odbc.connection_pooling=strict;pdo_odbc.db2_instance_name[Pdo_mysql]; If mysqlnd is used: Number of cache slots for the internal result set cache; http://php.net/pdo_mysql.cache_sizepdo_mysql.cache_size = 2000; Default socket name for local MySQL connects. If empty, uses the built-in; MySQL defaults.; http://php.net/pdo_mysql.default-socketpdo_mysql.default_socket=[Phar]; http://php.net/phar.readonly;phar.readonly = On; http://php.net/phar.require-hash;phar.require_hash = On;phar.cache_list =[mail function]; For Win32 only.; http://php.net/smtpSMTP = localhost; http://php.net/smtp-portsmtp_port = 25; For Win32 only.; http://php.net/sendmail-from;sendmail_from = me@example.com; For Unix only. You may supply arguments as well (default: &quot;sendmail -t -i&quot;).; http://php.net/sendmail-path;sendmail_path =; Force the addition of the specified parameters to be passed as extra parameters; to the sendmail binary. These parameters will always replace the value of; the 5th parameter to mail().;mail.force_extra_parameters =; Add X-PHP-Originating-Script: that will include uid of the script followed by the filenamemail.add_x_header = On; The path to a log file that will log all mail() calls. Log entries include; the full path of the script, line number, To address and headers.;mail.log =; Log mail to syslog (Event Log on Windows).;mail.log = syslog[ODBC]; http://php.net/odbc.default-db;odbc.default_db = Not yet implemented; http://php.net/odbc.default-user;odbc.default_user = Not yet implemented; http://php.net/odbc.default-pw;odbc.default_pw = Not yet implemented; Controls the ODBC cursor model.; Default: SQL_CURSOR_STATIC (default).;odbc.default_cursortype; Allow or prevent persistent links.; http://php.net/odbc.allow-persistentodbc.allow_persistent = On; Check that a connection is still valid before reuse.; http://php.net/odbc.check-persistentodbc.check_persistent = On; Maximum number of persistent links. -1 means no limit.; http://php.net/odbc.max-persistentodbc.max_persistent = -1; Maximum number of links (persistent + non-persistent). -1 means no limit.; http://php.net/odbc.max-linksodbc.max_links = -1; Handling of LONG fields. Returns number of bytes to variables. 0 means; passthru.; http://php.net/odbc.defaultlrlodbc.defaultlrl = 4096; Handling of binary data. 0 means passthru, 1 return as is, 2 convert to char.; See the documentation on odbc_binmode and odbc_longreadlen for an explanation; of odbc.defaultlrl and odbc.defaultbinmode; http://php.net/odbc.defaultbinmodeodbc.defaultbinmode = 1;birdstep.max_links = -1[Interbase]; Allow or prevent persistent links.ibase.allow_persistent = 1; Maximum number of persistent links. -1 means no limit.ibase.max_persistent = -1; Maximum number of links (persistent + non-persistent). -1 means no limit.ibase.max_links = -1; Default database name for ibase_connect().;ibase.default_db =; Default username for ibase_connect().;ibase.default_user =; Default password for ibase_connect().;ibase.default_password =; Default charset for ibase_connect().;ibase.default_charset =; Default timestamp format.ibase.timestampformat = &quot;%Y-%m-%d %H:%M:%S&quot;; Default date format.ibase.dateformat = &quot;%Y-%m-%d&quot;; Default time format.ibase.timeformat = &quot;%H:%M:%S&quot;[MySQLi]; Maximum number of persistent links. -1 means no limit.; http://php.net/mysqli.max-persistentmysqli.max_persistent = -1; Allow accessing, from PHP&apos;s perspective, local files with LOAD DATA statements; http://php.net/mysqli.allow_local_infile;mysqli.allow_local_infile = On; Allow or prevent persistent links.; http://php.net/mysqli.allow-persistentmysqli.allow_persistent = On; Maximum number of links. -1 means no limit.; http://php.net/mysqli.max-linksmysqli.max_links = -1; If mysqlnd is used: Number of cache slots for the internal result set cache; http://php.net/mysqli.cache_sizemysqli.cache_size = 2000; Default port number for mysqli_connect(). If unset, mysqli_connect() will use; the $MYSQL_TCP_PORT or the mysql-tcp entry in /etc/services or the; compile-time value defined MYSQL_PORT (in that order). Win32 will only look; at MYSQL_PORT.; http://php.net/mysqli.default-portmysqli.default_port = 3306; Default socket name for local MySQL connects. If empty, uses the built-in; MySQL defaults.; http://php.net/mysqli.default-socketmysqli.default_socket =; Default host for mysql_connect() (doesn&apos;t apply in safe mode).; http://php.net/mysqli.default-hostmysqli.default_host =; Default user for mysql_connect() (doesn&apos;t apply in safe mode).; http://php.net/mysqli.default-usermysqli.default_user =; Default password for mysqli_connect() (doesn&apos;t apply in safe mode).; Note that this is generally a *bad* idea to store passwords in this file.; *Any* user with PHP access can run &apos;echo get_cfg_var(&quot;mysqli.default_pw&quot;); and reveal this password! And of course, any users with read access to this; file will be able to reveal the password as well.; http://php.net/mysqli.default-pwmysqli.default_pw =; Allow or prevent reconnectmysqli.reconnect = Off[mysqlnd]; Enable / Disable collection of general statistics by mysqlnd which can be; used to tune and monitor MySQL operations.; http://php.net/mysqlnd.collect_statisticsmysqlnd.collect_statistics = On; Enable / Disable collection of memory usage statistics by mysqlnd which can be; used to tune and monitor MySQL operations.; http://php.net/mysqlnd.collect_memory_statisticsmysqlnd.collect_memory_statistics = Off; Records communication from all extensions using mysqlnd to the specified log; file.; http://php.net/mysqlnd.debug;mysqlnd.debug =; Defines which queries will be logged.; http://php.net/mysqlnd.log_mask;mysqlnd.log_mask = 0; Default size of the mysqlnd memory pool, which is used by result sets.; http://php.net/mysqlnd.mempool_default_size;mysqlnd.mempool_default_size = 16000; Size of a pre-allocated buffer used when sending commands to MySQL in bytes.; http://php.net/mysqlnd.net_cmd_buffer_size;mysqlnd.net_cmd_buffer_size = 2048; Size of a pre-allocated buffer used for reading data sent by the server in; bytes.; http://php.net/mysqlnd.net_read_buffer_size;mysqlnd.net_read_buffer_size = 32768; Timeout for network requests in seconds.; http://php.net/mysqlnd.net_read_timeout;mysqlnd.net_read_timeout = 31536000; SHA-256 Authentication Plugin related. File with the MySQL server public RSA; key.; http://php.net/mysqlnd.sha256_server_public_key;mysqlnd.sha256_server_public_key =[OCI8]; Connection: Enables privileged connections using external; credentials (OCI_SYSOPER, OCI_SYSDBA); http://php.net/oci8.privileged-connect;oci8.privileged_connect = Off; Connection: The maximum number of persistent OCI8 connections per; process. Using -1 means no limit.; http://php.net/oci8.max-persistent;oci8.max_persistent = -1; Connection: The maximum number of seconds a process is allowed to; maintain an idle persistent connection. Using -1 means idle; persistent connections will be maintained forever.; http://php.net/oci8.persistent-timeout;oci8.persistent_timeout = -1; Connection: The number of seconds that must pass before issuing a; ping during oci_pconnect() to check the connection validity. When; set to 0, each oci_pconnect() will cause a ping. Using -1 disables; pings completely.; http://php.net/oci8.ping-interval;oci8.ping_interval = 60; Connection: Set this to a user chosen connection class to be used; for all pooled server requests with Oracle 11g Database Resident; Connection Pooling (DRCP). To use DRCP, this value should be set to; the same string for all web servers running the same application,; the database pool must be configured, and the connection string must; specify to use a pooled server.;oci8.connection_class =; High Availability: Using On lets PHP receive Fast Application; Notification (FAN) events generated when a database node fails. The; database must also be configured to post FAN events.;oci8.events = Off; Tuning: This option enables statement caching, and specifies how; many statements to cache. Using 0 disables statement caching.; http://php.net/oci8.statement-cache-size;oci8.statement_cache_size = 20; Tuning: Enables statement prefetching and sets the default number of; rows that will be fetched automatically after statement execution.; http://php.net/oci8.default-prefetch;oci8.default_prefetch = 100; Compatibility. Using On means oci_close() will not close; oci_connect() and oci_new_connect() connections.; http://php.net/oci8.old-oci-close-semantics;oci8.old_oci_close_semantics = Off[PostgreSQL]; Allow or prevent persistent links.; http://php.net/pgsql.allow-persistentpgsql.allow_persistent = On; Detect broken persistent links always with pg_pconnect().; Auto reset feature requires a little overheads.; http://php.net/pgsql.auto-reset-persistentpgsql.auto_reset_persistent = Off; Maximum number of persistent links. -1 means no limit.; http://php.net/pgsql.max-persistentpgsql.max_persistent = -1; Maximum number of links (persistent+non persistent). -1 means no limit.; http://php.net/pgsql.max-linkspgsql.max_links = -1; Ignore PostgreSQL backends Notice message or not.; Notice message logging require a little overheads.; http://php.net/pgsql.ignore-noticepgsql.ignore_notice = 0; Log PostgreSQL backends Notice message or not.; Unless pgsql.ignore_notice=0, module cannot log notice message.; http://php.net/pgsql.log-noticepgsql.log_notice = 0[bcmath]; Number of decimal digits for all bcmath functions.; http://php.net/bcmath.scalebcmath.scale = 0[browscap]; http://php.net/browscap;browscap = extra/browscap.ini[Session]; Handler used to store/retrieve data.; http://php.net/session.save-handlersession.save_handler = files; Argument passed to save_handler. In the case of files, this is the path; where data files are stored. Note: Windows users have to change this; variable in order to use PHP&apos;s session functions.;; The path can be defined as:;; session.save_path = &quot;N;/path&quot;;; where N is an integer. Instead of storing all the session files in; /path, what this will do is use subdirectories N-levels deep, and; store the session data in those directories. This is useful if; your OS has problems with many files in one directory, and is; a more efficient layout for servers that handle many sessions.;; NOTE 1: PHP will not create this directory structure automatically.; You can use the script in the ext/session dir for that purpose.; NOTE 2: See the section on garbage collection below if you choose to; use subdirectories for session storage;; The file storage module creates files using mode 600 by default.; You can change that by using;; session.save_path = &quot;N;MODE;/path&quot;;; where MODE is the octal representation of the mode. Note that this; does not overwrite the process&apos;s umask.; http://php.net/session.save-path;session.save_path = &quot;/var/lib/php/sessions&quot;; Whether to use strict session mode.; Strict session mode does not accept uninitialized session ID and regenerate; session ID if browser sends uninitialized session ID. Strict mode protects; applications from session fixation via session adoption vulnerability. It is; disabled by default for maximum compatibility, but enabling it is encouraged.; https://wiki.php.net/rfc/strict_sessionssession.use_strict_mode = 0; Whether to use cookies.; http://php.net/session.use-cookiessession.use_cookies = 1; http://php.net/session.cookie-secure;session.cookie_secure =; This option forces PHP to fetch and use a cookie for storing and maintaining; the session id. We encourage this operation as it&apos;s very helpful in combating; session hijacking when not specifying and managing your own session id. It is; not the be-all and end-all of session hijacking defense, but it&apos;s a good start.; http://php.net/session.use-only-cookiessession.use_only_cookies = 1; Name of the session (used as cookie name).; http://php.net/session.namesession.name = PHPSESSID; Initialize session on request startup.; http://php.net/session.auto-startsession.auto_start = 0; Lifetime in seconds of cookie or, if 0, until browser is restarted.; http://php.net/session.cookie-lifetimesession.cookie_lifetime = 0; The path for which the cookie is valid.; http://php.net/session.cookie-pathsession.cookie_path = /; The domain for which the cookie is valid.; http://php.net/session.cookie-domainsession.cookie_domain =; Whether or not to add the httpOnly flag to the cookie, which makes it inaccessible to browser scripting languages such as JavaScript.; http://php.net/session.cookie-httponlysession.cookie_httponly =; Handler used to serialize data. php is the standard serializer of PHP.; http://php.net/session.serialize-handlersession.serialize_handler = php; Defines the probability that the &apos;garbage collection&apos; process is started; on every session initialization. The probability is calculated by using; gc_probability/gc_divisor. Where session.gc_probability is the numerator; and gc_divisor is the denominator in the equation. Setting this value to 1; when the session.gc_divisor value is 100 will give you approximately a 1% chance; the gc will run on any give request.; Default Value: 1; Development Value: 1; Production Value: 1; http://php.net/session.gc-probabilitysession.gc_probability = 0; Defines the probability that the &apos;garbage collection&apos; process is started on every; session initialization. The probability is calculated by using the following equation:; gc_probability/gc_divisor. Where session.gc_probability is the numerator and; session.gc_divisor is the denominator in the equation. Setting this value to 1; when the session.gc_divisor value is 100 will give you approximately a 1% chance; the gc will run on any give request. Increasing this value to 1000 will give you; a 0.1% chance the gc will run on any give request. For high volume production servers,; this is a more efficient approach.; Default Value: 100; Development Value: 1000; Production Value: 1000; http://php.net/session.gc-divisorsession.gc_divisor = 1000; After this number of seconds, stored data will be seen as &apos;garbage&apos; and; cleaned up by the garbage collection process.; http://php.net/session.gc-maxlifetimesession.gc_maxlifetime = 1440; NOTE: If you are using the subdirectory option for storing session files; (see session.save_path above), then garbage collection does *not*; happen automatically. You will need to do your own garbage; collection through a shell script, cron entry, or some other method.; For example, the following script would is the equivalent of; setting session.gc_maxlifetime to 1440 (1440 seconds = 24 minutes):; find /path/to/sessions -cmin +24 -type f | xargs rm; Check HTTP Referer to invalidate externally stored URLs containing ids.; HTTP_REFERER has to contain this substring for the session to be; considered as valid.; http://php.net/session.referer-checksession.referer_check =; Set to &#123;nocache,private,public,&#125; to determine HTTP caching aspects; or leave this empty to avoid sending anti-caching headers.; http://php.net/session.cache-limitersession.cache_limiter = nocache; Document expires after n minutes.; http://php.net/session.cache-expiresession.cache_expire = 180; trans sid support is disabled by default.; Use of trans sid may risk your users&apos; security.; Use this option with caution.; - User may send URL contains active session ID; to other person via. email/irc/etc.; - URL that contains active session ID may be stored; in publicly accessible computer.; - User may access your site with the same session ID; always using URL stored in browser&apos;s history or bookmarks.; http://php.net/session.use-trans-sidsession.use_trans_sid = 0; Set session ID character length. This value could be between 22 to 256.; Shorter length than default is supported only for compatibility reason.; Users should use 32 or more chars.; http://php.net/session.sid-length; Default Value: 32; Development Value: 26; Production Value: 26session.sid_length = 26; The URL rewriter will look for URLs in a defined set of HTML tags.; &lt;form&gt; is special; if you include them here, the rewriter will; add a hidden &lt;input&gt; field with the info which is otherwise appended; to URLs. &lt;form&gt; tag&apos;s action attribute URL will not be modified; unless it is specified.; Note that all valid entries require a &quot;=&quot;, even if no value follows.; Default Value: &quot;a=href,area=href,frame=src,form=&quot;; Development Value: &quot;a=href,area=href,frame=src,form=&quot;; Production Value: &quot;a=href,area=href,frame=src,form=&quot;; http://php.net/url-rewriter.tagssession.trans_sid_tags = &quot;a=href,area=href,frame=src,form=&quot;; URL rewriter does not rewrite absolute URLs by default.; To enable rewrites for absolute pathes, target hosts must be specified; at RUNTIME. i.e. use ini_set(); &lt;form&gt; tags is special. PHP will check action attribute&apos;s URL regardless; of session.trans_sid_tags setting.; If no host is defined, HTTP_HOST will be used for allowed host.; Example value: php.net,www.php.net,wiki.php.net; Use &quot;,&quot; for multiple hosts. No spaces are allowed.; Default Value: &quot;&quot;; Development Value: &quot;&quot;; Production Value: &quot;&quot;;session.trans_sid_hosts=&quot;&quot;; Define how many bits are stored in each character when converting; the binary hash data to something readable.; Possible values:; 4 (4 bits: 0-9, a-f); 5 (5 bits: 0-9, a-v); 6 (6 bits: 0-9, a-z, A-Z, &quot;-&quot;, &quot;,&quot;); Default Value: 4; Development Value: 5; Production Value: 5; http://php.net/session.hash-bits-per-charactersession.sid_bits_per_character = 5; Enable upload progress tracking in $_SESSION; Default Value: On; Development Value: On; Production Value: On; http://php.net/session.upload-progress.enabled;session.upload_progress.enabled = On; Cleanup the progress information as soon as all POST data has been read; (i.e. upload completed).; Default Value: On; Development Value: On; Production Value: On; http://php.net/session.upload-progress.cleanup;session.upload_progress.cleanup = On; A prefix used for the upload progress key in $_SESSION; Default Value: &quot;upload_progress_&quot;; Development Value: &quot;upload_progress_&quot;; Production Value: &quot;upload_progress_&quot;; http://php.net/session.upload-progress.prefix;session.upload_progress.prefix = &quot;upload_progress_&quot;; The index name (concatenated with the prefix) in $_SESSION; containing the upload progress information; Default Value: &quot;PHP_SESSION_UPLOAD_PROGRESS&quot;; Development Value: &quot;PHP_SESSION_UPLOAD_PROGRESS&quot;; Production Value: &quot;PHP_SESSION_UPLOAD_PROGRESS&quot;; http://php.net/session.upload-progress.name;session.upload_progress.name = &quot;PHP_SESSION_UPLOAD_PROGRESS&quot;; How frequently the upload progress should be updated.; Given either in percentages (per-file), or in bytes; Default Value: &quot;1%&quot;; Development Value: &quot;1%&quot;; Production Value: &quot;1%&quot;; http://php.net/session.upload-progress.freq;session.upload_progress.freq = &quot;1%&quot;; The minimum delay between updates, in seconds; Default Value: 1; Development Value: 1; Production Value: 1; http://php.net/session.upload-progress.min-freq;session.upload_progress.min_freq = &quot;1&quot;; Only write session data when session data is changed. Enabled by default.; http://php.net/session.lazy-write;session.lazy_write = On[Assertion]; Switch whether to compile assertions at all (to have no overhead at run-time); -1: Do not compile at all; 0: Jump over assertion at run-time; 1: Execute assertions; Changing from or to a negative value is only possible in php.ini! (For turning assertions on and off at run-time, see assert.active, when zend.assertions = 1); Default Value: 1; Development Value: 1; Production Value: -1; http://php.net/zend.assertionszend.assertions = -1; Assert(expr); active by default.; http://php.net/assert.active;assert.active = On; Throw an AssertationException on failed assertions; http://php.net/assert.exception;assert.exception = On; Issue a PHP warning for each failed assertion. (Overridden by assert.exception if active); http://php.net/assert.warning;assert.warning = On; Don&apos;t bail out by default.; http://php.net/assert.bail;assert.bail = Off; User-function to be called if an assertion fails.; http://php.net/assert.callback;assert.callback = 0; Eval the expression with current error_reporting(). Set to true if you want; error_reporting(0) around the eval().; http://php.net/assert.quiet-eval;assert.quiet_eval = 0[COM]; path to a file containing GUIDs, IIDs or filenames of files with TypeLibs; http://php.net/com.typelib-file;com.typelib_file =; allow Distributed-COM calls; http://php.net/com.allow-dcom;com.allow_dcom = true; autoregister constants of a components typlib on com_load(); http://php.net/com.autoregister-typelib;com.autoregister_typelib = true; register constants casesensitive; http://php.net/com.autoregister-casesensitive;com.autoregister_casesensitive = false; show warnings on duplicate constant registrations; http://php.net/com.autoregister-verbose;com.autoregister_verbose = true; The default character set code-page to use when passing strings to and from COM objects.; Default: system ANSI code page;com.code_page=[mbstring]; language for internal character representation.; This affects mb_send_mail() and mbstring.detect_order.; http://php.net/mbstring.language;mbstring.language = Japanese; Use of this INI entry is deprecated, use global internal_encoding instead.; internal/script encoding.; Some encoding cannot work as internal encoding. (e.g. SJIS, BIG5, ISO-2022-*); If empty, default_charset or internal_encoding or iconv.internal_encoding is used.; The precedence is: default_charset &lt; internal_encoding &lt; iconv.internal_encoding;mbstring.internal_encoding =; Use of this INI entry is deprecated, use global input_encoding instead.; http input encoding.; mbstring.encoding_traslation = On is needed to use this setting.; If empty, default_charset or input_encoding or mbstring.input is used.; The precedence is: default_charset &lt; intput_encoding &lt; mbsting.http_input; http://php.net/mbstring.http-input;mbstring.http_input =; Use of this INI entry is deprecated, use global output_encoding instead.; http output encoding.; mb_output_handler must be registered as output buffer to function.; If empty, default_charset or output_encoding or mbstring.http_output is used.; The precedence is: default_charset &lt; output_encoding &lt; mbstring.http_output; To use an output encoding conversion, mbstring&apos;s output handler must be set; otherwise output encoding conversion cannot be performed.; http://php.net/mbstring.http-output;mbstring.http_output =; enable automatic encoding translation according to; mbstring.internal_encoding setting. Input chars are; converted to internal encoding by setting this to On.; Note: Do _not_ use automatic encoding translation for; portable libs/applications.; http://php.net/mbstring.encoding-translation;mbstring.encoding_translation = Off; automatic encoding detection order.; &quot;auto&quot; detect order is changed according to mbstring.language; http://php.net/mbstring.detect-order;mbstring.detect_order = auto; substitute_character used when character cannot be converted; one from another; http://php.net/mbstring.substitute-character;mbstring.substitute_character = none; overload(replace) single byte functions by mbstring functions.; mail(), ereg(), etc are overloaded by mb_send_mail(), mb_ereg(),; etc. Possible values are 0,1,2,4 or combination of them.; For example, 7 for overload everything.; 0: No overload; 1: Overload mail() function; 2: Overload str*() functions; 4: Overload ereg*() functions; http://php.net/mbstring.func-overload;mbstring.func_overload = 0; enable strict encoding detection.; Default: Off;mbstring.strict_detection = On; This directive specifies the regex pattern of content types for which mb_output_handler(); is activated.; Default: mbstring.http_output_conv_mimetype=^(text/|application/xhtml\\+xml);mbstring.http_output_conv_mimetype=[gd]; Tell the jpeg decode to ignore warnings and try to create; a gd image. The warning will then be displayed as notices; disabled by default; http://php.net/gd.jpeg-ignore-warning;gd.jpeg_ignore_warning = 1[exif]; Exif UNICODE user comments are handled as UCS-2BE/UCS-2LE and JIS as JIS.; With mbstring support this will automatically be converted into the encoding; given by corresponding encode setting. When empty mbstring.internal_encoding; is used. For the decode settings you can distinguish between motorola and; intel byte order. A decode setting cannot be empty.; http://php.net/exif.encode-unicode;exif.encode_unicode = ISO-8859-15; http://php.net/exif.decode-unicode-motorola;exif.decode_unicode_motorola = UCS-2BE; http://php.net/exif.decode-unicode-intel;exif.decode_unicode_intel = UCS-2LE; http://php.net/exif.encode-jis;exif.encode_jis =; http://php.net/exif.decode-jis-motorola;exif.decode_jis_motorola = JIS; http://php.net/exif.decode-jis-intel;exif.decode_jis_intel = JIS[Tidy]; The path to a default tidy configuration file to use when using tidy; http://php.net/tidy.default-config;tidy.default_config = /usr/local/lib/php/default.tcfg; Should tidy clean and repair output automatically?; WARNING: Do not use this option if you are generating non-html content; such as dynamic images; http://php.net/tidy.clean-outputtidy.clean_output = Off[soap]; Enables or disables WSDL caching feature.; http://php.net/soap.wsdl-cache-enabledsoap.wsdl_cache_enabled=1; Sets the directory name where SOAP extension will put cache files.; http://php.net/soap.wsdl-cache-dirsoap.wsdl_cache_dir=&quot;/tmp&quot;; (time to live) Sets the number of second while cached file will be used; instead of original one.; http://php.net/soap.wsdl-cache-ttlsoap.wsdl_cache_ttl=86400; Sets the size of the cache limit. (Max. number of WSDL files to cache)soap.wsdl_cache_limit = 5[sysvshm]; A default size of the shared memory segment;sysvshm.init_mem = 10000[ldap]; Sets the maximum number of open links or -1 for unlimited.ldap.max_links = -1[dba];dba.default_handler=[opcache]; Determines if Zend OPCache is enabledopcache.enable=1; Determines if Zend OPCache is enabled for the CLI version of PHPopcache.enable_cli=1; The OPcache shared memory storage size.opcache.memory_consumption=128; The amount of memory for interned strings in Mbytes.opcache.interned_strings_buffer=8; The maximum number of keys (scripts) in the OPcache hash table.; Only numbers between 200 and 1000000 are allowed.opcache.max_accelerated_files=10000; The maximum percentage of &quot;wasted&quot; memory until a restart is scheduled.;opcache.max_wasted_percentage=5; When this directive is enabled, the OPcache appends the current working; directory to the script key, thus eliminating possible collisions between; files with the same name (basename). Disabling the directive improves; performance, but may break existing applications.;opcache.use_cwd=1; When disabled, you must reset the OPcache manually or restart the; webserver for changes to the filesystem to take effect.;opcache.validate_timestamps=1; How often (in seconds) to check file timestamps for changes to the shared; memory storage allocation. (&quot;1&quot; means validate once per second, but only; once per request. &quot;0&quot; means always validate);opcache.revalidate_freq=2; Enables or disables file search in include_path optimization;opcache.revalidate_path=0; If disabled, all PHPDoc comments are dropped from the code to reduce the; size of the optimized code.opcache.save_comments=1; Allow file existence override (file_exists, etc.) performance feature.;opcache.enable_file_override=0; A bitmask, where each bit enables or disables the appropriate OPcache; passes;opcache.optimization_level=0xffffffff;opcache.inherited_hack=1;opcache.dups_fix=0; The location of the OPcache blacklist file (wildcards allowed).; Each OPcache blacklist file is a text file that holds the names of files; that should not be accelerated. The file format is to add each filename; to a new line. The filename may be a full path or just a file prefix; (i.e., /var/www/x blacklists all the files and directories in /var/www; that start with &apos;x&apos;). Line starting with a ; are ignored (comments).;opcache.blacklist_filename=; Allows exclusion of large files from being cached. By default all files; are cached.;opcache.max_file_size=0; Check the cache checksum each N requests.; The default value of &quot;0&quot; means that the checks are disabled.;opcache.consistency_checks=0; How long to wait (in seconds) for a scheduled restart to begin if the cache; is not being accessed.;opcache.force_restart_timeout=180; OPcache error_log file name. Empty string assumes &quot;stderr&quot;.;opcache.error_log=; All OPcache errors go to the Web server log.; By default, only fatal errors (level 0) or errors (level 1) are logged.; You can also enable warnings (level 2), info messages (level 3) or; debug messages (level 4).;opcache.log_verbosity_level=1; Preferred Shared Memory back-end. Leave empty and let the system decide.;opcache.preferred_memory_model=; Protect the shared memory from unexpected writing during script execution.; Useful for internal debugging only.;opcache.protect_memory=0; Allows calling OPcache API functions only from PHP scripts which path is; started from specified string. The default &quot;&quot; means no restriction;opcache.restrict_api=; Mapping base of shared memory segments (for Windows only). All the PHP; processes have to map shared memory into the same address space. This; directive allows to manually fix the &quot;Unable to reattach to base address&quot;; errors.;opcache.mmap_base=; Enables and sets the second level cache directory.; It should improve performance when SHM memory is full, at server restart or; SHM reset. The default &quot;&quot; disables file based caching.;opcache.file_cache=; Enables or disables opcode caching in shared memory.;opcache.file_cache_only=0; Enables or disables checksum validation when script loaded from file cache.;opcache.file_cache_consistency_checks=1; Implies opcache.file_cache_only=1 for a certain process that failed to; reattach to the shared memory (for Windows only). Explicitly enabled file; cache is required.;opcache.file_cache_fallback=1; Enables or disables copying of PHP code (text segment) into HUGE PAGES.; This should improve performance, but requires appropriate OS configuration.;opcache.huge_code_pages=1; Validate cached file permissions.;opcache.validate_permission=0; Prevent name collisions in chroot&apos;ed environment.;opcache.validate_root=0[curl]; A default value for the CURLOPT_CAINFO option. This is required to be an; absolute path.;curl.cainfo =[openssl]; The location of a Certificate Authority (CA) file on the local filesystem; to use when verifying the identity of SSL/TLS peers. Most users should; not specify a value for this directive as PHP will attempt to use the; OS-managed cert stores in its absence. If specified, this value may still; be overridden on a per-stream basis via the &quot;cafile&quot; SSL stream context; option.;openssl.cafile=; If openssl.cafile is not specified or if the CA file is not found, the; directory pointed to by openssl.capath is searched for a suitable; certificate. This value must be a correctly hashed certificate directory.; Most users should not specify a value for this directive as PHP will; attempt to use the OS-managed cert stores in its absence. If specified,; this value may still be overridden on a per-stream basis via the &quot;capath&quot;; SSL stream context option.;openssl.capath=; Local Variables:; tab-width: 4; End: www.conf123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423; Start a new pool named &apos;www&apos;.; the variable $pool can be used in any directive and will be replaced by the; pool name (&apos;www&apos; here)[www]; Per pool prefix; It only applies on the following directives:; - &apos;access.log&apos;; - &apos;slowlog&apos;; - &apos;listen&apos; (unixsocket); - &apos;chroot&apos;; - &apos;chdir&apos;; - &apos;php_values&apos;; - &apos;php_admin_values&apos;; When not set, the global prefix (or /usr) applies instead.; Note: This directive can also be relative to the global prefix.; Default Value: none;prefix = /path/to/pools/$pool; Unix user/group of processes; Note: The user is mandatory. If the group is not set, the default user&apos;s group; will be used.user = www-datagroup = www-data; The address on which to accept FastCGI requests.; Valid syntaxes are:; &apos;ip.add.re.ss:port&apos; - to listen on a TCP socket to a specific IPv4 address on; a specific port;; &apos;[ip:6:addr:ess]:port&apos; - to listen on a TCP socket to a specific IPv6 address on; a specific port;; &apos;port&apos; - to listen on a TCP socket to all addresses; (IPv6 and IPv4-mapped) on a specific port;; &apos;/path/to/unix/socket&apos; - to listen on a unix socket.; Note: This value is mandatory.listen = /run/php/php7.2-fpm.sock; Set listen(2) backlog.; Default Value: 511 (-1 on FreeBSD and OpenBSD);listen.backlog = 511; Set permissions for unix socket, if one is used. In Linux, read/write; permissions must be set in order to allow connections from a web server. Many; BSD-derived systems allow connections regardless of permissions.; Default Values: user and group are set as the running user; mode is set to 0660listen.owner = www-datalisten.group = www-data;listen.mode = 0660; When POSIX Access Control Lists are supported you can set them using; these options, value is a comma separated list of user/group names.; When set, listen.owner and listen.group are ignored;listen.acl_users =;listen.acl_groups =; List of addresses (IPv4/IPv6) of FastCGI clients which are allowed to connect.; Equivalent to the FCGI_WEB_SERVER_ADDRS environment variable in the original; PHP FCGI (5.2.2+). Makes sense only with a tcp listening socket. Each address; must be separated by a comma. If this value is left blank, connections will be; accepted from any ip address.; Default Value: any;listen.allowed_clients = 127.0.0.1; Specify the nice(2) priority to apply to the pool processes (only if set); The value can vary from -19 (highest priority) to 20 (lower priority); Note: - It will only work if the FPM master process is launched as root; - The pool processes will inherit the master process priority; unless it specified otherwise; Default Value: no set; process.priority = -19; Set the process dumpable flag (PR_SET_DUMPABLE prctl) even if the process user; or group is differrent than the master process user. It allows to create process; core dump and ptrace the process for the pool user.; Default Value: no; process.dumpable = yes; Choose how the process manager will control the number of child processes.; Possible Values:; static - a fixed number (pm.max_children) of child processes;; dynamic - the number of child processes are set dynamically based on the; following directives. With this process management, there will be; always at least 1 children.; pm.max_children - the maximum number of children that can; be alive at the same time.; pm.start_servers - the number of children created on startup.; pm.min_spare_servers - the minimum number of children in &apos;idle&apos;; state (waiting to process). If the number; of &apos;idle&apos; processes is less than this; number then some children will be created.; pm.max_spare_servers - the maximum number of children in &apos;idle&apos;; state (waiting to process). If the number; of &apos;idle&apos; processes is greater than this; number then some children will be killed.; ondemand - no children are created at startup. Children will be forked when; new requests will connect. The following parameter are used:; pm.max_children - the maximum number of children that; can be alive at the same time.; pm.process_idle_timeout - The number of seconds after which; an idle process will be killed.; Note: This value is mandatory.pm = dynamic; The number of child processes to be created when pm is set to &apos;static&apos; and the; maximum number of child processes when pm is set to &apos;dynamic&apos; or &apos;ondemand&apos;.; This value sets the limit on the number of simultaneous requests that will be; served. Equivalent to the ApacheMaxClients directive with mpm_prefork.; Equivalent to the PHP_FCGI_CHILDREN environment variable in the original PHP; CGI. The below defaults are based on a server without much resources. Don&apos;t; forget to tweak pm.* to fit your needs.; Note: Used when pm is set to &apos;static&apos;, &apos;dynamic&apos; or &apos;ondemand&apos;; Note: This value is mandatory.pm.max_children = 50; The number of child processes created on startup.; Note: Used only when pm is set to &apos;dynamic&apos;; Default Value: min_spare_servers + (max_spare_servers - min_spare_servers) / 2pm.start_servers = 5; The desired minimum number of idle server processes.; Note: Used only when pm is set to &apos;dynamic&apos;; Note: Mandatory when pm is set to &apos;dynamic&apos;pm.min_spare_servers = 5; The desired maximum number of idle server processes.; Note: Used only when pm is set to &apos;dynamic&apos;; Note: Mandatory when pm is set to &apos;dynamic&apos;pm.max_spare_servers = 30; The number of seconds after which an idle process will be killed.; Note: Used only when pm is set to &apos;ondemand&apos;; Default Value: 10s;pm.process_idle_timeout = 10s;; The number of requests each child process should execute before respawning.; This can be useful to work around memory leaks in 3rd party libraries. For; endless request processing specify &apos;0&apos;. Equivalent to PHP_FCGI_MAX_REQUESTS.; Default Value: 0pm.max_requests = 500; The URI to view the FPM status page. If this value is not set, no URI will be; recognized as a status page. It shows the following informations:; pool - the name of the pool;; process manager - static, dynamic or ondemand;; start time - the date and time FPM has started;; start since - number of seconds since FPM has started;; accepted conn - the number of request accepted by the pool;; listen queue - the number of request in the queue of pending; connections (see backlog in listen(2));; max listen queue - the maximum number of requests in the queue; of pending connections since FPM has started;; listen queue len - the size of the socket queue of pending connections;; idle processes - the number of idle processes;; active processes - the number of active processes;; total processes - the number of idle + active processes;; max active processes - the maximum number of active processes since FPM; has started;; max children reached - number of times, the process limit has been reached,; when pm tries to start more children (works only for; pm &apos;dynamic&apos; and &apos;ondemand&apos;);; Value are updated in real time.; Example output:; pool: www; process manager: static; start time: 01/Jul/2011:17:53:49 +0200; start since: 62636; accepted conn: 190460; listen queue: 0; max listen queue: 1; listen queue len: 42; idle processes: 4; active processes: 11; total processes: 15; max active processes: 12; max children reached: 0;; By default the status page output is formatted as text/plain. Passing either; &apos;html&apos;, &apos;xml&apos; or &apos;json&apos; in the query string will return the corresponding; output syntax. Example:; http://www.foo.bar/status; http://www.foo.bar/status?json; http://www.foo.bar/status?html; http://www.foo.bar/status?xml;; By default the status page only outputs short status. Passing &apos;full&apos; in the; query string will also return status for each pool process.; Example:; http://www.foo.bar/status?full; http://www.foo.bar/status?json&amp;full; http://www.foo.bar/status?html&amp;full; http://www.foo.bar/status?xml&amp;full; The Full status returns for each process:; pid - the PID of the process;; state - the state of the process (Idle, Running, ...);; start time - the date and time the process has started;; start since - the number of seconds since the process has started;; requests - the number of requests the process has served;; request duration - the duration in µs of the requests;; request method - the request method (GET, POST, ...);; request URI - the request URI with the query string;; content length - the content length of the request (only with POST);; user - the user (PHP_AUTH_USER) (or &apos;-&apos; if not set);; script - the main script called (or &apos;-&apos; if not set);; last request cpu - the %cpu the last request consumed; it&apos;s always 0 if the process is not in Idle state; because CPU calculation is done when the request; processing has terminated;; last request memory - the max amount of memory the last request consumed; it&apos;s always 0 if the process is not in Idle state; because memory calculation is done when the request; processing has terminated;; If the process is in Idle state, then informations are related to the; last request the process has served. Otherwise informations are related to; the current request being served.; Example output:; ************************; pid: 31330; state: Running; start time: 01/Jul/2011:17:53:49 +0200; start since: 63087; requests: 12808; request duration: 1250261; request method: GET; request URI: /test_mem.php?N=10000; content length: 0; user: -; script: /home/fat/web/docs/php/test_mem.php; last request cpu: 0.00; last request memory: 0;; Note: There is a real-time FPM status monitoring sample web page available; It&apos;s available in: /usr/share/php/7.2/fpm/status.html;; Note: The value must start with a leading slash (/). The value can be; anything, but it may not be a good idea to use the .php extension or it; may conflict with a real PHP file.; Default Value: not set;pm.status_path = /status; The ping URI to call the monitoring page of FPM. If this value is not set, no; URI will be recognized as a ping page. This could be used to test from outside; that FPM is alive and responding, or to; - create a graph of FPM availability (rrd or such);; - remove a server from a group if it is not responding (load balancing);; - trigger alerts for the operating team (24/7).; Note: The value must start with a leading slash (/). The value can be; anything, but it may not be a good idea to use the .php extension or it; may conflict with a real PHP file.; Default Value: not set;ping.path = /ping; This directive may be used to customize the response of a ping request. The; response is formatted as text/plain with a 200 response code.; Default Value: pong;ping.response = pong; The access log file; Default: not set;access.log = log/$pool.access.log; The access log format.; The following syntax is allowed; %%: the &apos;%&apos; character; %C: %CPU used by the request; it can accept the following format:; - %&#123;user&#125;C for user CPU only; - %&#123;system&#125;C for system CPU only; - %&#123;total&#125;C for user + system CPU (default); %d: time taken to serve the request; it can accept the following format:; - %&#123;seconds&#125;d (default); - %&#123;miliseconds&#125;d; - %&#123;mili&#125;d; - %&#123;microseconds&#125;d; - %&#123;micro&#125;d; %e: an environment variable (same as $_ENV or $_SERVER); it must be associated with embraces to specify the name of the env; variable. Some exemples:; - server specifics like: %&#123;REQUEST_METHOD&#125;e or %&#123;SERVER_PROTOCOL&#125;e; - HTTP headers like: %&#123;HTTP_HOST&#125;e or %&#123;HTTP_USER_AGENT&#125;e; %f: script filename; %l: content-length of the request (for POST request only); %m: request method; %M: peak of memory allocated by PHP; it can accept the following format:; - %&#123;bytes&#125;M (default); - %&#123;kilobytes&#125;M; - %&#123;kilo&#125;M; - %&#123;megabytes&#125;M; - %&#123;mega&#125;M; %n: pool name; %o: output header; it must be associated with embraces to specify the name of the header:; - %&#123;Content-Type&#125;o; - %&#123;X-Powered-By&#125;o; - %&#123;Transfert-Encoding&#125;o; - ....; %p: PID of the child that serviced the request; %P: PID of the parent of the child that serviced the request; %q: the query string; %Q: the &apos;?&apos; character if query string exists; %r: the request URI (without the query string, see %q and %Q); %R: remote IP address; %s: status (response code); %t: server time the request was received; it can accept a strftime(3) format:; %d/%b/%Y:%H:%M:%S %z (default); The strftime(3) format must be encapsuled in a %&#123;&lt;strftime_format&gt;&#125;t tag; e.g. for a ISO8601 formatted timestring, use: %&#123;%Y-%m-%dT%H:%M:%S%z&#125;t; %T: time the log has been written (the request has finished); it can accept a strftime(3) format:; %d/%b/%Y:%H:%M:%S %z (default); The strftime(3) format must be encapsuled in a %&#123;&lt;strftime_format&gt;&#125;t tag; e.g. for a ISO8601 formatted timestring, use: %&#123;%Y-%m-%dT%H:%M:%S%z&#125;t; %u: remote user;; Default: &quot;%R - %u %t \\&quot;%m %r\\&quot; %s&quot;;access.format = &quot;%R - %u %t \\&quot;%m %r%Q%q\\&quot; %s %f %&#123;mili&#125;d %&#123;kilo&#125;M %C%%&quot;; The log file for slow requests; Default Value: not set; Note: slowlog is mandatory if request_slowlog_timeout is set;slowlog = log/$pool.log.slow; The timeout for serving a single request after which a PHP backtrace will be; dumped to the &apos;slowlog&apos; file. A value of &apos;0s&apos; means &apos;off&apos;.; Available units: s(econds)(default), m(inutes), h(ours), or d(ays); Default Value: 0;request_slowlog_timeout = 0; Depth of slow log stack trace.; Default Value: 20;request_slowlog_trace_depth = 20; The timeout for serving a single request after which the worker process will; be killed. This option should be used when the &apos;max_execution_time&apos; ini option; does not stop script execution for some reason. A value of &apos;0&apos; means &apos;off&apos;.; Available units: s(econds)(default), m(inutes), h(ours), or d(ays); Default Value: 0;request_terminate_timeout = 0; Set open file descriptor rlimit.; Default Value: system defined value;rlimit_files = 1024; Set max core size rlimit.; Possible Values: &apos;unlimited&apos; or an integer greater or equal to 0; Default Value: system defined value;rlimit_core = 0; Chroot to this directory at the start. This value must be defined as an; absolute path. When this value is not set, chroot is not used.; Note: you can prefix with &apos;$prefix&apos; to chroot to the pool prefix or one; of its subdirectories. If the pool prefix is not set, the global prefix; will be used instead.; Note: chrooting is a great security feature and should be used whenever; possible. However, all PHP paths will be relative to the chroot; (error_log, sessions.save_path, ...).; Default Value: not set;chroot =; Chdir to this directory at the start.; Note: relative path can be used.; Default Value: current directory or / when chroot;chdir = /var/www; Redirect worker stdout and stderr into main error log. If not set, stdout and; stderr will be redirected to /dev/null according to FastCGI specs.; Note: on highloaded environement, this can cause some delay in the page; process time (several ms).; Default Value: no;catch_workers_output = yes; Clear environment in FPM workers; Prevents arbitrary environment variables from reaching FPM worker processes; by clearing the environment in workers before env vars specified in this; pool configuration are added.; Setting to &quot;no&quot; will make all environment variables available to PHP code; via getenv(), $_ENV and $_SERVER.; Default Value: yesclear_env = no; Limits the extensions of the main script FPM will allow to parse. This can; prevent configuration mistakes on the web server side. You should only limit; FPM to .php extensions to prevent malicious users to use other extensions to; execute php code.; Note: set an empty value to allow all extensions.; Default Value: .php;security.limit_extensions = .php .php3 .php4 .php5 .php7; Pass environment variables like LD_LIBRARY_PATH. All $VARIABLEs are taken from; the current environment.; Default Value: clean env;env[HOSTNAME] = $HOSTNAME;env[PATH] = /usr/local/bin:/usr/bin:/bin;env[TMP] = /tmp;env[TMPDIR] = /tmp;env[TEMP] = /tmp; Additional php.ini defines, specific to this pool of workers. These settings; overwrite the values previously defined in the php.ini. The directives are the; same as the PHP SAPI:; php_value/php_flag - you can set classic ini defines which can; be overwritten from PHP call &apos;ini_set&apos;.; php_admin_value/php_admin_flag - these directives won&apos;t be overwritten by; PHP call &apos;ini_set&apos;; For php_*flag, valid values are on, off, 1, 0, true, false, yes or no.; Defining &apos;extension&apos; will load the corresponding shared extension from; extension_dir. Defining &apos;disable_functions&apos; or &apos;disable_classes&apos; will not; overwrite previously defined php.ini values, but will append the new value; instead.; Note: path INI options can be relative and will be expanded with the prefix; (pool, global or /usr); Default Value: nothing is defined by default except the values in php.ini and; specified at startup with the -d argument;php_admin_value[sendmail_path] = /usr/sbin/sendmail -t -i -f www@my.domain.com;php_flag[display_errors] = off;php_admin_value[error_log] = /var/log/fpm-php.www.log;php_admin_flag[log_errors] = on;php_admin_value[memory_limit] = 32M 开始使用 重启nginx以及php-fpm 访问127.0.0.1进入nextcloud配置页设置管理员账户密码和配置数据库。 注意，进入setting的overview之后，nextcloud会自动扫描服务器配置以检查安全性。这里会出现一些问题可能影响到服务器安全，你可以按照指示来做相应配置。一般来说这里会有数据库data文件夹可以被外部直接访问(这个必须改掉);没有配置redis缓存(这个最好配置以提升性能) warnings solutions see: https://docs.nextcloud.com/server/15/admin_manual/configuration_server/security_setup_warnings.html 一般来说，会出现通过不信任的域名访问的情况，这是因为，最开始访问nextcloud时所使用的域名或ip会默认被视作trusted_domain存储，这可能是个局域网域名或者直接是127.0.0.1，而之后可能会通过其他ip域名访问比如内网穿透所使用的公网ip和域名。之后还想加入trusted_domain就需要手动添加。在 nextcloud/config/config.php的trusted_domain数组里添加即可。(redis的配置也是这样的) 示例config.php 123456789101112131415161718192021222324252627282930313233&lt;?php$CONFIG = array ( &apos;instanceid&apos; =&gt; &apos;&apos;, &apos;passwordsalt&apos; =&gt; &apos;9PDaah6ONL+fiIFCgNmzJ8Fa/QctrU&apos;, &apos;secret&apos; =&gt; &apos;&apos;, &apos;memcache.local&apos; =&gt; &apos;\\\\OC\\\\Memcache\\\\APCu&apos;, &apos;memcache.distributed&apos; =&gt; &apos;\\\\OC\\\\Memcache\\\\Redis&apos;, &apos;memcache.locking&apos; =&gt; &apos;\\\\OC\\\\Memcache\\\\Redis&apos;, &apos;redis&apos; =&gt; array ( &apos;host&apos; =&gt; &apos;127.0.0.1&apos;, &apos;port&apos; =&gt; 6379, ), &apos;trusted_domains&apos; =&gt; array ( 0 =&gt; &apos;172.22.161.174&apos;, 1 =&gt; &apos;192.168.12.1&apos; ), &apos;datadirectory&apos; =&gt; &apos;/repository/nextcloud/data&apos;, &apos;dbtype&apos; =&gt; &apos;mysql&apos;, &apos;version&apos; =&gt; &apos;15.0.5.3&apos;, &apos;overwrite.cli.url&apos; =&gt; &apos;http://172.22.161.174&apos;, &apos;dbname&apos; =&gt; &apos;nextcloud&apos;, &apos;dbhost&apos; =&gt; &apos;localhost:3306&apos;, &apos;dbport&apos; =&gt; &apos;&apos;, &apos;dbtableprefix&apos; =&gt; &apos;oc_&apos;, &apos;mysql.utf8mb4&apos; =&gt; true, &apos;dbuser&apos; =&gt; &apos;nextcloud&apos;, &apos;dbpassword&apos; =&gt; &apos;&apos;, &apos;installed&apos; =&gt; true, &apos;mail_smtpmode&apos; =&gt; &apos;smtp&apos;, &apos;mail_sendmailmode&apos; =&gt; &apos;smtp&apos;,);","categories":[{"name":"-[局域网打造计划]","slug":"局域网打造计划","permalink":"http://blog.levas.top/categories/局域网打造计划/"}],"tags":[]},{"title":"springboot与mybatis上手使用","slug":"springboot与mybatis上手使用","date":"2019-03-29T14:04:39.000Z","updated":"2020-03-21T17:05:27.000Z","comments":true,"path":"2019/03/29/springboot与mybatis上手使用/","link":"","permalink":"http://blog.levas.top/2019/03/29/springboot与mybatis上手使用/","excerpt":"","text":"目的 了解springboot的特性 了解如何使用springboot构建项目 一些开发时需要了解的东西 了解Mybatis以及如何在springboot项目中集成Mybatis 如何集成其他的东西(从百度 or google开始，以druid为示例) 建立springboot项目使用SpringInitializer 选择依赖项 开始cv写代码 run 文件基本结构以下对文件夹的描述如果以”你可以”的方式开头，表示这个文件夹是你自由创建命名的 如果没有则表示这个文件夹是springinitializer创建的or不可缺少的结构文件夹 main java com example demo （所有的代码文件，在这里自由建立文件夹以区分java类） Controller （你可以这样命名表示这里面的类都是Controller） Service （同Controller） Entity （你可以这样命名表示这里面是Mybatis所需要的实体类，后面解释） Mapper （你可以这样命名表示这里面是Mybatis所需要的映射类，后面解释） DemoApplication（一定要有这个文件，关键是里面的类注解@SpringBootApplication） 其他的文件(夹)，取决于个人 resources （所有的静态文件和配置文件） static (除html文件以外的其他静态文件:js,css,图片)(这里的文件不能过大，static中的文件会被打包) js (你可以这样命名表示这里面是js文件) css (你可以这样命名表示这里面是css文件) templates (所有的html文件) application.properties (配置文件) application.yml (配置文件，和properties区别在于配置的格式不一样) 其他的文件(夹)或配置文件，取决于个人 test (单元测试文件夹) Springboot的一些基本类和注解Controller类：@Controller和@RestController 列出和Controller类相关的一些注解 @RequestMapping @RequestParam @RequestBody @ResponseBody 直接看示例代码讲结构 @Controller和@RestController都作用于类，表示这个类是一个Controller。 @RestController等于@Controller + @ResponseBody 通过@RequestMapping注解来表示接口的访问方式： 1234567891011@RequestMapping(value = &quot;/user&quot;,method = RequestMethod.GET)//value参数表示的是这个接口的url，method参数表示的是接口访问的方法，这里是getpublic String user()&#123; return &quot;user&quot;; &#125;//post@RequestMapping(value = &quot;/add&quot;,method = RequestMethod.POST)public String add()&#123; &#125; @Service @Service注解标记的类将会在项目初始化的时候被Spring扫描并被尝试实例化加入容器 @Component @Component注解标记的类也同样会被Spring扫描并被实例化加入容器 @Component @Controller 和@Service性质差不多。 @Service用于标注业务层组件 @Controller用于标注控制器 当一个组件不好归类时可以用@Component标记 Configuration类：@Configuration 被@Configuration注解标记的类成Configuration类 @Configuration注解的配置类有如下要求 配置类不可以被final关键字修饰 配置类不可以是匿名类 springboot会尝试在Configuration类中找@Bean标记的方法，并运行这个方法 @Bean @Bean作用于方法 12345@Beanpublic JedisPoolConfig getRedisConfig() &#123; JedisPoolConfig config = new JedisPoolConfig(); return config;&#125; 被@Bean注解的方法，Spring将会认为这个方法会返回一个对象，并且在项目初始化的时候调用一次这个方法，获得返回的对象并将其存入自己的容器中。该对象的默认名字为该方法名。你也可以为其指定name: 12345@Bean(name=&quot;xiaoming123456&quot;)public JedisPoolConfig getRedisConfig() &#123; JedisPoolConfig config = new JedisPoolConfig(); return config;&#125; 一般来说，通过@Bean你可以自己生成一些你需要使用的对象，将其交给Spring管理。你不一定会直接访问这些对象，也有一部分是你自己定义的对象，如果你希望在其他地方直接访问它们，可以通过如下方法来实现 12ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(&quot;application-context.xml&quot;);Object bean1 = context.getBean(&quot;BeanTest&quot;); Spring仅会调用一次被@Bean注解的方法。 Springboot的特性依赖注入代码示例：（注入了UserInfoMapper类） 123456789101112131415public class UserService &#123; @Autowired UserInfoMapper userInfoMapper; //register()需要使用到UseInfoMapper类的add()，这里使用@Autowired注入UseInfoMapper public boolean register(String openid,String username,String user_pic_url)&#123; if(hasOpenid(openid))&#123; return true; &#125;else&#123; userInfoMapper.add(new UserInfoEntity(openid,username,user_pic_url,&quot;&quot;,0)); return false; &#125; &#125;&#125; @Autowried注解 这个注解作用于一个对象，你不需要对它修饰的对象赋值。 使用@Autowried注入的对象是单例的 你可以用它在一个类中注入任意数量的其他类，比如像下面这样@Autowried的嵌套：一个注入了其他类的类(UserService类中被注入了UserInfoMapper类)也可以被注入进其他的类(注入进RegisterController类) 1234567891011121314151617181920212223242526272829303132333435363738394041public class UserService &#123; @Autowired UserInfoMapper userInfoMapper; @Autowired WeiXinService weiXinService; //register()需要使用到UseInfoMapper类的add()，这里使用@Autowired注入UseInfoMapper public boolean register(String openid,String username,String user_pic_url)&#123; if(hasOpenid(openid))&#123; return true; &#125;else&#123; userInfoMapper.add(new UserInfoEntity(openid,username,user_pic_url,&quot;&quot;,0)); return false; &#125; &#125; public boolean hasOpenid(String openid)&#123; List&lt;UserInfoEntity&gt; list = userInfoMapper.findEntityByOpenid(openid); if(list == null || list.size() == 0) return false; else return true; &#125;&#125;//在RegisterController类中注入了UserService类public class RegisterController&#123; @Autowried UserService userService; public String register(HttpServletRequest request)&#123; String openid = request.getParameter(&quot;openid&quot;); String username = request.getParameter(&quot;username&quot;); String user_pic_url = request.getParameter(&quot;user_pic_url&quot;); if(userService.register(openid,username,user_pic_url))&#123; return &quot;register success&quot;; &#125;else&#123; return &quot;register false&quot;; &#125; &#125;&#125; 嵌套实现逻辑：在包扫描的时候建立好各个类之间的注入关系，然后从任意一个类开始尝试注入，即尝试实例化它所含有的被注入的类，有以下规则： 123451. 任何类被单例实例化的时候首先从对象仓库中查找这个类对象，假如该类被预先实例化过，将这个存在仓库中的对象返回。如果没有，进入2（这实现了单例注入）2. 任何类被单例实例化的时候都要尝试扫描自己以查看自己是否有@Autowired注入的类，如果有，首先尝试实例化这个内含的注入的类。3. 如果内含的注入类对象也都被实例化(或者获得对象仓库中的对象)了，则尝试实例化本体，并将生成的对象存入对象仓库，并返回这个对象。（因为一个类可能会在不同的地方被注入多次，所以需要存进仓库，这保证了下一次注入是单例的） 内嵌servlet容器 原来的部署流程： 打war包 –&gt; 放进tomcat的webapp –&gt; 等待tomcat定时扫描webapp包发现这个新的war包并解压部署。 内嵌tomcat：自带的web服务器 需要你在application.yml或者application.properties中为它指定：端口，编码，根路由。 yml配置示例 (yml和properties的格式下面会讲) 123456server: tomcat: uri-encoding: UTF-8 port: 8080 servlet: context-path: /welcome 在如下依赖中包含了内嵌的tomcat容器依赖 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt; 请求参数注入你可以在一个Controller中的方法里指定任意数量的任意的特殊参数，springboot会在一次请求到来时，自动将这些参数装配好并调用你的方法将它们传进来。 注入原生Servlet开发中的一些类：HttpSession，HttpServletRequest，HttpServletResponse123456@RequestMapping(value = &quot;/test&quot;)public Object search(HttpSession session,HttpServletRequest,request)&#123; String username = session.getAttribute(&quot;username&quot;);//像原生servlet开发一样使用session对象 String password = request.getParameter(&quot;password&quot;);//拿到一个url中的参数或者是请求体中的key-value参数&#125; 使用@RequestParam注入你指定key的url参数1234@RequestMapping(value = &quot;/test&quot;)public Object search(@RequestParam(&quot;verify_code&quot;) String verify_code)&#123; &#125; 传参时url为 1http://ip/uri?verify_code=xx 注意： url中的参数的key必须和@RequestParam中标注的一样，@RequestParam注解之后的声明变量的变量名随意，但最好一样，避免混淆 @RequestParam只能接受url参数，请求体中的参数请使用@RequestBody 使用@RequestBody自动注入json1234@RequestMapping(value = &quot;/test&quot;)public Object search(@RequestBody JSONObject jsonObject)&#123; &#125; @RequestBody和@RequestParam @RequestBody用来获得请求体中的参数，@RequestParam用来获得请求头中的参数 你可以在同一个方法里同时使用这两个注解来提取参数 一旦使用@RequestBody，则该方法只能通过POST访问 一个POST访问的方法中最多只能有一个@RequestBody post和get中，可以使用多个@RequestParam 获得文件参数Multipartfile 天然的序列化 使用@RestController注解修饰的Controller默认返回的值将会被转换成json，并写入响应体。 例如： 1234@RequestMapping(value = &quot;/test&quot;)public String search()&#123; return &quot;yes&quot;;&#125; 将会返回 1&quot;yes&quot; //注意它是有双引号的 而在servlet中使用如下的方式发送响应 1response.getWriter().write(&quot;yes&quot;); 将会返回 1yes 同样你还能够返回别的东西 1234567@RequestMapping(value = &quot;/test&quot;)public Map search()&#123; Map map = new HashMap(); map.put(&quot;username&quot;,&quot;仓仓子&quot;); map.put(&quot;stuId&quot;,&quot;201721xxxx&quot;); return map;&#125; 将返回一个json对象 1&#123;&quot;username&quot;:&quot;仓仓子&quot;,&quot;stuId&quot;:&quot;201721xxxx&quot;&#125; 返回List将会返回一个json数组 最重要的是，它能够返回自定义Bean 12345678910111213141516@RequestMapping(value = &quot;/test&quot;)public Student search()&#123; Student student = new Student(); student.id = 1; student.username = &quot;仓仓子&quot;; student.studyCode = &quot;201721xxxx&quot;; return student;&#125;public class Student&#123; public int id; public String username; public String studyCode;&#125; 将会返回 1&#123;&quot;id&quot;:1,&quot;username&quot;:&quot;仓仓子&quot;,&quot;stuId&quot;:&quot;201721xxxx&quot;&#125; 返回自定义Bean的原理是，springboot获取到你的返回对象后，首先尝试将它转化成json(这个过程称为序列化)，然后写入响应中。即从一个Object对象，转化成一个String对象(json格式)(你们可以尝试自己实现下这个过程，通过代理来拿Object的属性名和值。) 配置简化 springboot所需要的所有配置都写在application.properties中。这里的properties只是表示配置文件的格式，你也可以使用yaml的格式来写，那么文件就应该命名为application.yml (yml是简写) 如果你使用yml格式来写，即你把配置信息以yml格式保存在了application.yml中，你必须在application.yml的同级路径下建立一个空的application.properties文件，因为springboot默认读取application.properties，只有application.properties为空的情况下才会认为用户有其他格式的配置文件，从而尝试读取application.yml。 举个例子就知道两种格式的区别了。yml相对来说更简单明了。 在application.properties中配置数据库 1234spring.datasource.driver-class-name=com.mysql.jdbc.Driverspring.datasource.url=jdbc:mysql://localhost:3306/company?allowMultiQueries=truespring.datasource.username=rootspring.datasource.password=xxxx 相同的内容用yml格式来写 123456spring: datasource: driver-class-name: com.mysql.jdbc.Driver #这是一条注释 url: jdbc:mysql://localhost:3306/company?allowMultiQueries=true #这还是一条注释 username: root password: xxx 注意：yml格式是以键值对形式表示的，在每个键值对的冒号后面必须有一个空格，否则将因格式问题导致项目无法启动。 springboot的配置文件内容：application.yml首先看一个示例 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061spring: datasource: type: com.alibaba.druid.pool.DruidDataSource #这是druid自己定义的 url: jdbc:mysql://localhost:3306/demo?useSSL=false #这是你的jdbc_url username: root #数据库连接用户名 password: aaaaaaaaaaa #数据库连接密码 initialSize: 10 #初始化的时候有几条连接 minIdle: 10 #连接池中最少保持几条连接 maxActive: 100 #连接池中最大保持几条连接 maxWait: 60000 timeBetweenEvictionRunsMillis: 60000 minEvictableIdleTimeMillis: 300000 validationQuery: SELECT &apos;x&apos; testWhileIdle: true testOnBorrow: false testOnReturn: false poolPreparedStatements: true maxPoolPreparedStatementPerConnectionSize: 200 #PreparedStatement缓存大小 filters: stat,wall #stat:web监控 wall：sql防火墙 connectionProperties: druid.stat.mergeSql=true;druid.stat.slowSqlMillis=5000 useGlobalDataSourceStat: true loginUsername: root loginPassword: zv9VJ11111 test-while-idle: true driver-class-name: com.mysql.cj.jdbc.Driver #jdbc驱动名，这个一定要有 thymeleaf: cache: false #模板是否使用缓存，本地开发的时候建议设置为false，部署后设置为true prefix: classpath:/templates/ #模板的路径前缀 suffix: .html #模板后缀名 encoding: UTF-8 #模板的编码 mode: HTML5 #模板是html5 check-template: true http: encoding: force: true charset: UTF-8 enabled: true servlet: multipart: max-file-size: 5MB max-request-size: 10MB redis: database: 0 #默认使用0号redis数据库 host: localhost #redis的域名/ip，localhost表示是本地redis port: 6379 #redis端口号 password: #redis密码，留空表示连接的redis密码为空 jedis: #redis连接池jedis配置 pool: max-active: 30 max-wait: -1 max-idle: 30 min-idle: 2 timeout: 1000 resources: #静态资源路径设置，springboot将会在设置的几个值中以从前到后顺序查找静态资源 static-locations: classpath:/META-INF/resources/,classpath:/resources,classpath:/static/,classpath:/public/server: #内嵌tomcat的配置 tomcat: uri-encoding: UTF-8 port: 8080 servlet: context-path: /demo 以上的内容一般来说是一个springboot项目所必要的(除非你没用mysql，druid，redis等等组件，那你可以去掉) 它们的含义你们可以自己查，这里只提几条。 你们也可以自己去找一些模板来用。 同时你也可以在application.yml中自己定义你自己的参数，比如我加一条： 123weixin: redirect_back: url: http://127.0.0.1/redirect/login?status=200 自定义参数的必要之处设置自定义值的必要之处：如果你的项目的某个参数可能因时间变化而变化，而你把这个值写死在代码中，那么当这个值变化的时候，你如果想要对已经上线的项目进行更改，就需要：1.改代码 2.重新编译打包 3.更换服务器上的包 4.重启服务器(5分钟起步)。而在配置文件中定义值，其他地方只是引用这个值，你需要做的事情就是：1.改配置 2.重启服务器 (20秒左右) 后者大大减少了服务的下线时间。这样做能够更好的提供稳定的服务。 任何时候，都建议把可能更换的参数写进配置文件，或者是引用全局变量的形式。 获得application.yml中的自定义参数现在我需要获得这个值，那么我就需要用@Value注解来获取 @Value注解作用于一个变量 被@Value标记的变量只需要被声明，不需要你去给它赋值，springboot会在项目初始化的时候扫描到这个注解，然后尝试从application.yml中获得这个值。 示例： 123通过这样的写法来获得上面那个yml展示中的weixin.redirect_back.url@Value(&quot;$&#123;weixin.redirect_back.url&#125;&quot;)String weiXinRedirectBackUrl; //只需要声明，不需要赋值 对于application.properties的示例 1weixin.redirect_back.url=http://127.0.0.1/redirect/login?status=200 上面的@Value标签也可以获得这里的application.properties中的url的值 如果springboot无法获得你指定的@Value参数中的值，或者发现了这个值但是类型转换错误，那么springboot将因初始化失败中止启动 springboot的其他操作自定义初始化任务：@PostConstruct 这个注解其实不是spring提供的，是servlet提供的。但是一般情况下你们应该可以用到它的功能，就提一下 注解作用：被@Postconstruct标记的方法，会在springboot启动完毕之后被调用一次，且仅调用一次。这样可以用来做一些初始化的任务，比如检查一下数据库的数据，或者是检查一下项目使用的接口是否可以调用，或者是打印一下自己设置的参数的值看看是否正常。 当然你们也可以用定时任务实现，即fixedDelay设置一个很大的值。 1234@Postconstructpublic void init()&#123; //在springboot其他组件什么的初始化都结束之后执行&#125; 定时任务：@Scheduled @Scheduled注解作用于方法，被标记的方法会被springboot当作一个定时方法，springboot会按照你指定的规则计算该在什么时侯执行这个方法，比如在项目初始化的时候执行一个配置方法，每天凌晨2点项目请求量小的时候扫描数据库做一些数据处理等等。 示例： 12345//每天4点（24小时）执行@Scheduled(cron = &quot;0 0 4 * * ? &quot;)public void authRefresh() &#123; System.out.println(&quot;现在是北京时间4点整&quot;);&#125; 使用： 在项目入口类使用@EnableScheduling 12345678@EnableScheduling@SpringBootApplicationpublic class TanmuApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(TanmuApplication.class, args); &#125;&#125; 使用@Scheduled注解标记你自己的方法，并且设置符合规则的值。 在@Scheduled中有四个键值，分别是cron，fixedDelay，fixedRate，initialDelay cron规则见https://www.cnblogs.com/junrong624/p/4239517.html 或者自行搜索 fixedDelay表示，这个方法会在项目初始化的时候就被执行，fixedDelay的值表示在每一次执行完成之后延迟多长时间执行，单位：毫秒 12345//服务启动时运行，设置10天的间隔日期@Scheduled(fixedDelay = 1000*60*60*24*10)public void questionMateListRefresh() &#123; &#125; fixedRate表示，这个方法会在项目初始化的时候就被执行，fixedRate的值表示在每一次执行任务开始之后延迟多长时间再一次这个方法，单位：毫秒 initialDelay表示，这个方法会在容器启动后，延迟多长时间第一次执行这个方法，此后每一次执行任务都按照fixedDelay或者fixedRate的值和规则来。initialDelay可以和fixedDelay配合使用 fixedDelay，fixedRate，cron彼此冲突，在同一个方法上你只能使用其中的一个。 在springboot中使用过滤器:@Filter 你的过滤器类需要实现 javax.servlet.Filter 接口 向springboot注册你的过滤器 (以下任一种皆可) 第一种方法：使用@WebFilter注解注释你的过滤器类 第二种方法：通过FilterRegistrationBean类注册 1234567891011121314151617181920@Configurationpublic class FilterConfig &#123; @Bean //被@Bean标记的方法会在项目初始化的时候被执行一边，获取一个对象，这里是TestFilter类 public Filter TestFilter()&#123; //这里返回的是你的过滤器类对象 return new TestFilter(); &#125; @Bean public FilterRegistrationBean IdentityRegistration() &#123; FilterRegistrationBean registration = new FilterRegistrationBean(); registration.setFilter(new DelegatingFilterProxy(&quot;TestFilter&quot;));//你的过滤器的类名 registration.addUrlPatterns(&quot;/login&quot;);//你的过滤器拦截的路径 registration.setName(&quot;TestFilter&quot;);//你的过滤器的类名 registration.setOrder(3);//该过滤器优先级 return registration; &#125; //每一个过滤器都必须有上面两种方法&#125; springboot自带的线程池 使用： 在入口类使用@EnableAsync注解 创建异步任务配置类 1234567891011121314151617181920@Configurationpublic class SpringTaskExcutor implements AsyncConfigurer &#123; @Override public Executor getAsyncExecutor()&#123; ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor(); taskExecutor.setCorePoolSize(2); //线程池最少线程数量 taskExecutor.setMaxPoolSize(100); //最多线程数量 taskExecutor.setQueueCapacity(100); //队列大小 taskExecutor.setKeepAliveSeconds(300); //线程最大空闲时间 poolExecutor.setThreadNamePrefix(&quot;my-pool-&quot;);// 线程名称前缀 taskExecutor.initialize(); return taskExecutor; &#125; @Override public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler()&#123; return null; &#125;&#125; 在你想要异步调用的方法上使用@Async注解 123456@Asyncpublic void test()&#123; while(true)&#123; &#125;&#125; 在其他地方调用这个方法 1234public void buy()&#123; test(); //上面的test()方法里面是个死循环，如果同步执行，那么buy()将阻塞在test（） return; //但实际上是使用另一个线程去调用test()，而buy()所在的线程会结束回到上一级方法&#125; 千万注意：不要让你的异步线程有任何死锁或者while(true)的情况，也要控制好不要让线程池高负荷，因为@Async实现的异步是利用了springboot自己的线程池，这个线程池是和所有客户端以及服务端自己的异步任务共享的，一旦线程池高负荷，那么客户端请求因为无法获得一个空闲的线程，将会阻塞在调用异步方法的地方。 开发上的一些东西日志 日志是指，控制台打印的所有东西，包括servlet容器启动日志，你自己打印的东西，各种异常，定时任务信息 为什么要注意日志：通过日志来追踪你自己的一些运行时才会出现的bug(因为可能会有各种奇葩情况)，或者你的某些任务执行会输出一些关于服务健康性的信息。 日志文件的存放路径 tomcat默认路径为/var/logs/tomcat8/ 或者/var/logs/tomcat9 或者 tomcat根目录下的logs文件夹 在这个路径下有一个catalina.out(对于linux) 一般来说tomcat会把war包项目运行时的输出默认存入catalina.out,这就可能导致它体积很大，因为一个tomcat可以启动多个war包项目，并且多个人的项目的日志都打在catalina.out里面，彼此管理起来也很麻烦。 建议你们对一个项目建立一个专门的文件夹(与项目同名)来存放log 日志级别：由最严重到最不严重从上到下排列 Off：关闭日志输出，不输出任何东西 Fatal：相当严重，此类错误已经无法修复，并且如果系统继续运行下去的话后果严重。 Error：可修复，但无法确定系统会正常的工作下去 Warn：可修复，系统可继续运行下去 Info：无错误，系统正常运行。打印一些你感兴趣的或者重要的信息，这个可以用于生产环境中输出程序运行的一些重要信息，但是不能滥用，避免打印过多的日志 Debug：指出细粒度信息事件对调试应用程序是非常有帮助的，主要用于开发过程中打印一些运行信息 Trace：很低的日志级别，一般不会使用。 All：最低的日志级别，输出所有级别的内容 任何情况下，指定日志级别为某一个等级A，那么A等级的日志和级别比A严重的日志都会被输出 一般来说，常使用Debug到Fatal(左右包含)这五个级别，Fatal用的比较少(error都有了，还敢不修等fatal?) springboot整合日志：推荐使用slf4j 连接池(不仅仅是Mysql的连接) 数据库连接的建立和销毁都有较大的开销。 连接池就是一次性创建很多个连接对象，有人需要用连接就分配一个，连接使用结束之后就将其放回连接池 自己实现连接池，一个代码示例 1https://github.com/leaftogo/Tool/tree/master/connectionpool 使用开源连接池：druid c3p0 DBCP 贼好用的Mybatis基本介绍用好持久层框架能极大减少你的劳动量( &gt;20% )。 持久层框架是什么 有哪些持久层框架：Mybatis，Hibernate Mybatis的sql语法：Mybatis的sql在参数的写法上会不一样，其他语法与标准sql一致。 Mybatis简化了哪些东西： jdbc中执行sql操作的代码 对查询到的ResultSet进行拿参数并对参数进行封装传回上一层方法(这里的序列化指的是序列化为Bean) 开始使用 在pom中添加依赖 1234567891011121314151617&lt;dependency&gt; //jdbc驱动 &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; //mysql连接 &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;8.0.12&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt;&lt;/dependency&gt;&lt;dependency&gt; //mybatis本体 &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.3.2&lt;/version&gt;&lt;/dependency&gt; 在@SpringBootApplication标记的入口类上加一个@MapperScan(“”) 这里@MapperScan的值表示mybatis需要在哪个文件夹下去查找mybatis的mapper接口 写法示例： 1@MapperScan(&quot;com.example.demo.Mapper&quot;) 写你的Mapper接口 你的Mapper接口必须被@Mapper注解标记 示例： 1234@Mapperpublic interface UserDataMapper &#123;&#125; Mapper接口中允许有五种方法注解：@Insert @Select @Update @Delete @Options 它们都是方法注解，前四个互不兼容，同一个方法最多只能有一个且必需有一个 前四个分别用来表示这是一个 插入/查询/更改/删除 sql 示例（只是为了表示sql该写在哪里）： 1234567891011@Insert(&quot;你的sql，例如 insert into balabalabalabala&quot;)void add();@Select(&quot;select * from user where id=xxxxx&quot;)List&lt;String&gt; search();@Update(&quot;balabala&quot;)void update();@Delete(&quot;balabala&quot;)void delete(); 还是看代码： 1 需要注意这些地方： 如何写一个jdbc方法的传入参数 可以是普通的java变量，也可以是自定义bean 如何在sql中引用这些参数，即如何把这些参数写进sql (比如查询id为2017210000的学生，需要把这个学号传进sql中的where id = xxxx 的xxxx部分) 比如传入的参数是自定义bean，那么mybatis会先找你写在sql里的参数名，然后尝试在你传入的参数中去拿一个同名参数的值，或者通过代理便利你的自定义bean的参数名来找同名参数。 这样大大方便了你们去处理数据，直接序列化好传参就行。这是在牺牲性能换取开发效率。 可以设置怎样的返回值 boolean String int 正常的变量类型 自定义bean 12@Select(&quot;balabala&quot;)Bean searchById(int id); List 自定义bean的list (一般是select返回了多条数据) 12@Select(&quot;balabala&quot;)List&lt;Bean&gt; searchById(int id); 如何调用 在其他类中用@AutoWired注入mapper类，然后调用类中的方法。 关于Entity Entity只是对于针对数据库表定义的Bean的称呼，每张表一个Entity类 对于上面的传参可以传自定义Bean，你们就需要创建好合适的bean类，同时类名也不要容易混淆，最好同名加不同后缀，比如自定义Bean统一用 表名+”Entity” mapper为：表名+”Mapper” 你的Entity类可以用@Data注解标记，@Data会自动为一个类生成getter()和setter()。因为一旦数据库表字段过多，getter和setter啥的也会很多，看上去就不简洁。 Maven的一些东西maven不仅仅只是用来为项目添加依赖，它本身能够帮助你去创建项目和项目编译。 git clone mvn package java -jar 一把梭","categories":[{"name":"-[java]","slug":"java","permalink":"http://blog.levas.top/categories/java/"}],"tags":[]}]}